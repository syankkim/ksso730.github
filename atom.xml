<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>동글씨</title>
  
  <subtitle>동글씨의 LOG</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-03-27T05:31:56.535Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Suyan Kim</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>스프링 시큐리티 OAuth 사용한 로그인 기능구현</title>
    <link href="http://yoursite.com/2020/03/26/%EC%8A%A4%EB%A5%B4%EB%A7%81-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0-OAuth-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EA%B8%B0%EB%8A%A5%EA%B5%AC%ED%98%84/"/>
    <id>http://yoursite.com/2020/03/26/%EC%8A%A4%EB%A5%B4%EB%A7%81-%EC%8B%9C%ED%81%90%EB%A6%AC%ED%8B%B0-OAuth-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EA%B8%B0%EB%8A%A5%EA%B5%AC%ED%98%84/</id>
    <published>2020-03-26T13:17:40.000Z</published>
    <updated>2020-03-27T05:31:56.535Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><br/><h3 id="Google-Cloud-Platform-에서-인증용-API-신청하기"><a href="#Google-Cloud-Platform-에서-인증용-API-신청하기" class="headerlink" title="Google Cloud Platform 에서 인증용 API 신청하기"></a>Google Cloud Platform 에서 인증용 API 신청하기</h3><p><a href="https://console.cloud.google.com/home/dashboard?project=fruite" target="_blank" rel="noopener">구글클라우드 플랫폼</a> 에 접속하여 프로젝트를 생성한다.</p><p><strong>생성된 프로젝트에서 OAuth 동의화면을 구성한다.</strong><br><img src="https://user-images.githubusercontent.com/28856435/77653327-e1b7c380-6fb2-11ea-98bd-5ac9eb7393db.png" alt="image"><br><br/></p><p><strong>웹 어플리케이션 유형의 사용자 인증정보를 만든다.</strong><br><img src="https://user-images.githubusercontent.com/28856435/77651410-17a77880-6fb0-11ea-9bf4-5ee0d1c1fed2.png" alt="image"><br><br/></p><p><strong>아래와 같이 웹 어플리케이션의 클라이언트ID가 생성되었다.</strong><br><img src="https://user-images.githubusercontent.com/28856435/77651295-ecbd2480-6faf-11ea-85b2-09bbb8da3f9d.png" alt="image"><br><br/></p><h3 id="로그인-구현을-위한-설정"><a href="#로그인-구현을-위한-설정" class="headerlink" title="로그인 구현을 위한 설정"></a>로그인 구현을 위한 설정</h3><p><strong>build.gradle</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">'org.springframework.cloud:spring-cloud-starter-security:2.1.2.RELEASE'</span></span><br><span class="line">implementation <span class="string">'org.springframework.cloud:spring-cloud-starter-oauth2:2.1.2.RELEASE'</span></span><br></pre></td></tr></table></figure><p> <strong>application-oauth.properties</strong><br> /src/main/resources/static/application-oauth.properties 파일을 추가한다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.security.oauth2.client.registration.google.client-id=&#123;클라이언트 ID&#125;</span><br><span class="line">spring.security.oauth2.client.registration.google.client-secret=&#123;secret 코드&#125;</span><br><span class="line">spring.security.oauth2.client.registration.google.scope=profile,email</span><br></pre></td></tr></table></figure><p><strong>.gitIgnore</strong><br>해당 설정파일을 gitIgnore 에 넣어준다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">application-oauth.properties</span><br></pre></td></tr></table></figure><p><strong>application.yml</strong><br><code>include: oauth</code> 를 추가한다.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> </span><br><span class="line">    <span class="attr">active:</span> <span class="string">local</span></span><br><span class="line">    <span class="attr">include:</span> <span class="string">oauth</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;SpringBoot, SpringSecurity, OAuth2 를 이용해 Google 로그인을 구현해 봅니다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="Spring" scheme="http://yoursite.com/categories/Spring/"/>
    
    
      <category term="spring" scheme="http://yoursite.com/tags/spring/"/>
    
      <category term="OAuth2" scheme="http://yoursite.com/tags/OAuth2/"/>
    
  </entry>
  
  <entry>
    <title>Git pull 오류: Nothing to fetch</title>
    <link href="http://yoursite.com/2020/03/17/Git-pull-%EC%98%A4%EB%A5%98-Nothing-to-fetch/"/>
    <id>http://yoursite.com/2020/03/17/Git-pull-%EC%98%A4%EB%A5%98-Nothing-to-fetch/</id>
    <published>2020-03-17T03:09:22.000Z</published>
    <updated>2020-03-20T10:12:09.311Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="Git-pull-오류"><a href="#Git-pull-오류" class="headerlink" title="Git pull 오류"></a>Git pull 오류</h3><p>이클립스에서 git pull 을 실행하고 아래와 같으 오류를 직면했다.</p><p><img src="https://user-images.githubusercontent.com/28856435/76814014-f969ac00-683c-11ea-865c-62c14c550d22.png" alt="image"></p><h4 id="원인"><a href="#원인" class="headerlink" title="원인?"></a>원인?</h4><blockquote><p>remote 에 fetch 가 잡히지 않아서이다.</p></blockquote><p>그럼 또 의문이 생긴다. 왜 remote 에 fetch 를 잡아줘야 할까 ?<br>Git 에 대해 정확한 개념이 잡혀 있지 않은 듯해서 모호한 개념들에 대해 찾아봤다.</p><h3 id="origin-remote-정확히-짚고-가기"><a href="#origin-remote-정확히-짚고-가기" class="headerlink" title="origin remote 정확히 짚고 가기"></a>origin remote 정확히 짚고 가기</h3><p>필자의 블로그 repository 주소는 <code>https://github.com/ksso730/myblog.git</code> 이다.<br>로컬에 이 서버를 clone 하게되면 Git 은 자동으로 <code>origin</code> 이라는 이름을 붙인다.<br><code>origin</code> 으로부터 해당 repository 데이터를 모두 받고, <code>master</code> 브랜치를 가리키는 포인터를 만든다. 이 포인터를 <code>origin/master</code> 라 부른다.<br>Git 은 로컬의 <code>master</code> 브랜치가 <code>origin/master</code> 를 가리키게 한다.</p><p>정리해보자면 ,</p><p><code>https://github.com/ksso730/myblog.git</code></p><p>(My Computer - origin/master) -&gt; </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;이클립스에서 Git pull 오류: Nothing to fetch 해결 방법입니다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="http://yoursite.com/categories/Git/"/>
    
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>gradle 프로젝트 MariaDB 연동</title>
    <link href="http://yoursite.com/2020/03/16/gradle-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-MariaDB-%EC%97%B0%EB%8F%99/"/>
    <id>http://yoursite.com/2020/03/16/gradle-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-MariaDB-%EC%97%B0%EB%8F%99/</id>
    <published>2020-03-16T07:26:02.000Z</published>
    <updated>2020-03-27T05:34:28.145Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="Test-소스-구조"><a href="#Test-소스-구조" class="headerlink" title="Test 소스 구조"></a>Test 소스 구조</h3><p><img src="https://user-images.githubusercontent.com/28856435/77139690-4efebc80-6aba-11ea-858e-ae959d58ea4a.png" alt="image"></p><br/><h3 id="build-gradle-에-의존성-주입"><a href="#build-gradle-에-의존성-주입" class="headerlink" title="build.gradle 에 의존성 주입"></a>build.gradle 에 의존성 주입</h3><p><strong>build.gradle</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">'java'</span></span><br><span class="line">    id <span class="string">'org.springframework.boot'</span> version <span class="string">'2.1.7.RELEASE'</span></span><br><span class="line">    id <span class="string">'io.spring.dependency-management'</span> version <span class="string">'1.0.7.RELEASE'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">group = <span class="string">'com.sue'</span></span><br><span class="line">version = <span class="string">'0.0.1-SNAPSHOT'</span></span><br><span class="line">sourceCompatibility = <span class="string">'1.8'</span></span><br><span class="line"></span><br><span class="line">repositories &#123;</span><br><span class="line">    mavenCentral()</span><br><span class="line">    maven &#123; url <span class="string">"https://plugins.gradle.org/m2/"</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    <span class="comment">//mybatis</span></span><br><span class="line">    implementation <span class="string">'org.springframework.boot:spring-boot-dependencies:2.0.5.RELEASE'</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 스프링 부트를 사용하기 위함</span></span><br><span class="line">    implementation <span class="string">'org.springframework.boot:spring-boot-starter-web'</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 데이터를 연동하기 위함</span></span><br><span class="line">    implementation <span class="string">'org.springframework.boot:spring-boot-starter-data-jpa'</span></span><br><span class="line">    </span><br><span class="line"> <span class="comment">//mariadb 사용</span></span><br><span class="line">    compile(<span class="string">"mysql:mysql-connector-java:5.1.34"</span>)</span><br><span class="line">    compile(<span class="string">"org.mariadb.jdbc:mariadb-java-client"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Use JUnit test framework</span></span><br><span class="line">    testImplementation <span class="string">'junit:junit:4.12'</span></span><br><span class="line">    testImplementation <span class="string">'org.springframework.boot:spring-boot-starter-test'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="application-yml-설정파일-생성"><a href="#application-yml-설정파일-생성" class="headerlink" title="application.yml 설정파일 생성"></a>application.yml 설정파일 생성</h3><h4 id="DB-연동-실패한-application-yml"><a href="#DB-연동-실패한-application-yml" class="headerlink" title="DB 연동 실패한 application.yml"></a>DB 연동 실패한 application.yml</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: <span class="number">8081</span></span><br><span class="line">  servlet:</span><br><span class="line">    context-path: /</span><br><span class="line">      </span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql:<span class="comment">//127.0.0.1/sosi?autoReconnect=true&amp;useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line">    username: root</span><br><span class="line">    password: mysql1234</span><br><span class="line">    </span><br><span class="line">    jpa:</span><br><span class="line">    show-sql: <span class="keyword">true</span></span><br><span class="line">    hibernate:</span><br><span class="line">      ddl-auto: create</span><br><span class="line">      naming:</span><br><span class="line">        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl</span><br><span class="line">      use-<span class="keyword">new</span>-id-generator-mappings: <span class="keyword">false</span></span><br><span class="line">    properties:</span><br><span class="line">       hibernate:</span><br><span class="line">          dialect: org.hibernate.dialect.MySQL5InnoDBDialect</span><br><span class="line">          format_sql: <span class="keyword">true</span></span><br><span class="line">    open-in-view: <span class="keyword">false</span></span><br><span class="line"></span><br><span class="line">  http:</span><br><span class="line">    encoding:</span><br><span class="line">      charset: UTF-<span class="number">8</span></span><br><span class="line">      enabled: <span class="keyword">true</span></span><br><span class="line">      force: <span class="keyword">true</span></span><br></pre></td></tr></table></figure><p>위와 같았던 application.yml 파일을 아래와 같이 고쳤더니 DB 연동에 성공했다.<br>DB 연동에 필요했던 profile 이 없었던것.<br>그리고 <code>datasource</code> 상위의 속성도 빠뜨려져 있었다.<br><code>ddl-auto</code> 속성은 DB 생성 이후 <code>create</code> -&gt; <code>update</code> 로 바꿔주었다.</p><h4 id="DB-연동-성공한-application-yml"><a href="#DB-연동-성공한-application-yml" class="headerlink" title="DB 연동 성공한 application.yml"></a>DB 연동 성공한 application.yml</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">server:</span><br><span class="line">  port: <span class="number">8081</span></span><br><span class="line">  servlet:</span><br><span class="line">    context-path: /</span><br><span class="line">    </span><br><span class="line">spring:</span><br><span class="line">  profiles:</span><br><span class="line">    active:       </span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql:<span class="comment">//localhost:3306/sue</span></span><br><span class="line">    username: root</span><br><span class="line">    password: ehdrmf</span><br><span class="line">    </span><br><span class="line">  jpa:</span><br><span class="line">    show-sql: <span class="keyword">true</span></span><br><span class="line">    hibernate:</span><br><span class="line">      ddl-auto: update</span><br><span class="line">      naming:</span><br><span class="line">        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl</span><br><span class="line">      use-<span class="keyword">new</span>-id-generator-mappings: <span class="keyword">false</span></span><br><span class="line">    properties:</span><br><span class="line">       hibernate:</span><br><span class="line">          dialect: org.hibernate.dialect.MySQL5InnoDBDialect</span><br><span class="line">          format_sql: <span class="keyword">true</span></span><br><span class="line">    open-in-view: <span class="keyword">false</span></span><br><span class="line"></span><br><span class="line">  http:</span><br><span class="line">    encoding:</span><br><span class="line">      charset: UTF-<span class="number">8</span></span><br><span class="line">      enabled: <span class="keyword">true</span></span><br><span class="line">      force: <span class="keyword">true</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;gradle 프로젝트에서의 mariaDB 연동방법을 알아봅니다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="Projects" scheme="http://yoursite.com/categories/Projects/"/>
    
      <category term="JPA" scheme="http://yoursite.com/categories/Projects/JPA/"/>
    
    
      <category term="jpa" scheme="http://yoursite.com/tags/jpa/"/>
    
      <category term="gradle" scheme="http://yoursite.com/tags/gradle/"/>
    
      <category term="mariadb" scheme="http://yoursite.com/tags/mariadb/"/>
    
  </entry>
  
  <entry>
    <title>JPA 공통 매핑정보 사용</title>
    <link href="http://yoursite.com/2020/03/04/JPA-%EA%B3%B5%ED%86%B5-%EB%A7%A4%ED%95%91%EC%A0%95%EB%B3%B4-%EC%82%AC%EC%9A%A9/"/>
    <id>http://yoursite.com/2020/03/04/JPA-%EA%B3%B5%ED%86%B5-%EB%A7%A4%ED%95%91%EC%A0%95%EB%B3%B4-%EC%82%AC%EC%9A%A9/</id>
    <published>2020-03-04T14:07:50.000Z</published>
    <updated>2020-03-17T02:08:40.902Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="MappedSuperclass"><a href="#MappedSuperclass" class="headerlink" title="@MappedSuperclass"></a>@MappedSuperclass</h3><p><code>BaseEntity</code> 클래스.<br>자주쓰이는 공통으로 사용되는 매핑정보들을 모아, 상속받아 사용.<br>실무에서 많이 사용되는 방식이다.<br>추상 클래스로 만들어둔다. <code>abstract</code><br>물론 조회는 안된다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MappedSuperclass</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseEntity</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String modDate;</span><br><span class="line">    <span class="keyword">private</span> String regDate;</span><br><span class="line">    <span class="keyword">private</span> String createdBy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>예를 들어 Member 가 BasdEnty 를 상속받는다면,</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> <span class="keyword">extends</span> <span class="title">BaseEntity</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"MEMBER_ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"USERNAME"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long username;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    Member member = <span class="keyword">new</span> Member();</span><br><span class="line">    member.setCreatedBy(<span class="string">"Sue"</span>);</span><br><span class="line">    member.setModDate(<span class="string">"20200212"</span>);</span><br><span class="line">    member.setRegDate(<span class="string">"20200110"</span>);</span><br><span class="line"></span><br><span class="line">    em.persist(member);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>아래와 같이 상속받은 슈퍼 클래스의 값이 잘 입력된것을 확인 !</p><p><img src="https://user-images.githubusercontent.com/28856435/75888907-6cebe080-5e6f-11ea-9e33-17dc4321d674.png" alt="image"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;@MappedSuperclass 공통 속성을 모아두는 클래스.&lt;br&gt;공통 객체에서 상속받아 공통 속성들을 사용한다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="JPA" scheme="http://yoursite.com/categories/JPA/"/>
    
    
      <category term="jpa" scheme="http://yoursite.com/tags/jpa/"/>
    
  </entry>
  
  <entry>
    <title>JPA 상속관계 매핑</title>
    <link href="http://yoursite.com/2020/03/04/JPA-%EC%83%81%EC%86%8D%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/"/>
    <id>http://yoursite.com/2020/03/04/JPA-%EC%83%81%EC%86%8D%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/</id>
    <published>2020-03-03T15:32:57.000Z</published>
    <updated>2020-03-17T02:08:40.902Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="상속관계-매핑"><a href="#상속관계-매핑" class="headerlink" title="상속관계 매핑"></a>상속관계 매핑</h3><h4 id="논리모델을-실제-물리모델로"><a href="#논리모델을-실제-물리모델로" class="headerlink" title="논리모델을 실제 물리모델로"></a>논리모델을 실제 물리모델로</h4><p><img src="https://user-images.githubusercontent.com/28856435/75794895-ce9b4480-5db4-11ea-97a9-7151cbffc627.jpg" alt="modeling"></p><p>1) 조인전략: 각각 테이블로 변환<br> 상속관계로 가져옴 item 이 부모(라고 가정) &gt; 자식들(alberm, movie, book)<br> 각 자식들은 부모의 id 를 상속받는다.</p><p>2) 단일 테이블전략 : 통합 테이블로 변환<br> item 테이블에 모두 들어있음.</p><p>3) 구현 클래스마다 : 서브타입 테이블로 변환<br> 부모없이, (alberm, movie, book) 각 클래스마다 테이블전략</p><br/><h4 id="어노테이션"><a href="#어노테이션" class="headerlink" title="어노테이션"></a>어노테이션</h4><h5 id="Inheritance-strategy-InheritanceType"><a href="#Inheritance-strategy-InheritanceType" class="headerlink" title="@Inheritance(strategy=InheritanceType. ~~)"></a>@Inheritance(strategy=InheritanceType. ~~)</h5><p>조인전략: <code>JOINED</code><br>단일 테이블전략: <code>SINGEL_TABLE</code><br>각 클래스마다 테이블: <code>TABLE_PER_CLASS</code></p><h5 id="DiscriminatorColumn-name-”DTYPE”"><a href="#DiscriminatorColumn-name-”DTYPE”" class="headerlink" title="@DiscriminatorColumn(name=”DTYPE”)"></a>@DiscriminatorColumn(name=”DTYPE”)</h5><p>컬럼을 구분하기 위한 기능.<br>단일 테이블 전략에서 사용된다. (현재는 추가하지 않아도 자동으로 setting됨)</p><h5 id="DiscriminatorValue"><a href="#DiscriminatorValue" class="headerlink" title="@DiscriminatorValue(~)"></a>@DiscriminatorValue(<del>~</del>)</h5><hr><h4 id="조인전략"><a href="#조인전략" class="headerlink" title="조인전략"></a>조인전략</h4><p><strong>장점</strong></p><blockquote><p>테이블 정규화<br><code>외래키 참조 무결성 제약조건</code> 활용가능<br>저장공간 효율화</p></blockquote><p><strong>단점</strong></p><blockquote><p>조인을 많이 사용, 성능 저하<br>조회 쿼리복잡<br>데이터 저장시 INSERT 2번 호출</p></blockquote><p>여기서 잠깐짚고 넘어가는.. 잊혀진 상식..!</p><p><strong>무결성 제약조건</strong><br>데이터베이스에 들어있는 데이터의 정확성(일관성)을 보장하기 위해 부정확한 자료가 데이터베이스 내에 저장되는 것을 방지하기 위한 제약 조건을 의미함</p><table><thead><tr><th>무결성의 종류</th><th>설명</th></tr></thead><tbody><tr><td>널 무결성</td><td>릴레이션의 특정속성 값이 Null이 될 수 없도록 하는 규정</td></tr><tr><td>고유 무결성</td><td>릴레이션의 특정 속성에 대해서 각 튜플이 갖는 값들이 서로 달라야 한다는 규정</td></tr><tr><td>참조 무결성</td><td>외래키 값은 Null이거나 참조 릴레이션의 기본키 값과 동일해야 한다는 규정 즉 릴레이션은 참조할 수 없는 외래키 값을 가질 수 없다는 규정</td></tr><tr><td>도메인 무결성</td><td>특정 속성의 값이, 그 속성이 정의된 도메인에 속한 값이어야 한다는 규정</td></tr><tr><td>키 무결성</td><td>하나의 테이블에는 적어도 하나의 키가 존재해야 한다는 규정</td></tr></tbody></table><p><strong>ITEM</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Inheritance</span>(strategy = InheritanceType.JOINED)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>  String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> price;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>MOVIE</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Movie</span> <span class="keyword">extends</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String director;</span><br><span class="line">    <span class="keyword">private</span> String actor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ALBUM</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Album</span> <span class="keyword">extends</span> <span class="title">Item</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String artist;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>BOOK</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Book</span> <span class="keyword">extends</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">    <span class="keyword">private</span>  String isbn;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>실행해 주면,<br>아래와 같이 테이블 생성이 된다.</p><img width="456" alt="h2_item" src="https://user-images.githubusercontent.com/28856435/75796170-985ec480-5db6-11ea-9421-cd47c5af54b6.PNG"><br/><p>movie 객체 하나를 생성해서 넣어준다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Movie movie = <span class="keyword">new</span> Movie();</span><br><span class="line">movie.setDirector(<span class="string">"suyeon"</span>);</span><br><span class="line">movie.setActor(<span class="string">"nam"</span>);</span><br><span class="line">movie.setName(<span class="string">"바람과함께"</span>);</span><br><span class="line">movie.setPrice(<span class="number">10000</span>);</span><br><span class="line"></span><br><span class="line">em.persist(movie);</span><br></pre></td></tr></table></figure><p>아래와 같이 ITEM 을 상속받은 MOVIE 에 ID 가 동일하게 들어갔음을 확인할수 있다.<br><img src="https://user-images.githubusercontent.com/28856435/75882576-cac6fb00-5e64-11ea-8060-57c9cb79bfe4.png" alt="image"></p><br/><hr><h4 id="단일-테이블-전략"><a href="#단일-테이블-전략" class="headerlink" title="단일 테이블 전략"></a>단일 테이블 전략</h4><p>설계시 간단한 조건일 경우 많이 사용.<br>단일 테이블 전략은 한 테이블에 모두 밀어넣는 방법!</p><p><strong>장점</strong></p><blockquote><p>조인이 필요없음, 조회성능 빠름<br>조회쿼리가 단순.</p></blockquote><p><strong>단점</strong></p><blockquote><p>자식 엔티티가 매핑한 컬럼은 모두 NULL<br>하나의 테이블에 모두 저장되므로 오히려 느려질 수도 있는 상황 발생우려.</p></blockquote><p>아까 조인전략에서 했던 그대로에서 Items 클래스의 상속전략만 <code>SINGLE_TABLE</code> 로 바꿔준다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Inheritance</span>(strategy = InheritanceType.SINGLE_TABLE)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Items</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>그리고 다시실행!</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/* insert intelli_mapping.Movie</span><br><span class="line">    */ insert </span><br><span class="line">    into</span><br><span class="line">        Items</span><br><span class="line">        (name, price, actor, director, DTYPE, id) </span><br><span class="line">    values</span><br><span class="line">        (?, ?, ?, ?, <span class="string">'Movie'</span>, ?)</span><br></pre></td></tr></table></figure><p>조인전략에서는 실행되는 insert 쿼리가 ITems, Movie 두번이었지만<br>단일테이블 전략은 한번 실행되는걸 확인가능하다.</p><p>테이블이 다시 생성되고,<br>하나의 테이블에 모든 데이터가 들어갔다.<br>실행된 query 를 보면 <code>@DiscriminatorColumn</code> 을 추가하지 않았지만,<br><code>DTYPE</code> 이 자동으로 들어간것을 볼 수 있다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">create table Items (</span><br><span class="line">       DTYPE varchar(31) not null,</span><br><span class="line">        id bigint not null,</span><br><span class="line">        name varchar(255),</span><br><span class="line">        price <span class="built_in">integer</span> not null,</span><br><span class="line">        actor varchar(255),</span><br><span class="line">        director varchar(255),</span><br><span class="line">        author varchar(255),</span><br><span class="line">        isbn varchar(255),</span><br><span class="line">        artist varchar(255),</span><br><span class="line">        primary key (id)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/28856435/75884771-bbe24780-5e68-11ea-84a2-0d168b20c0df.png" alt="image"></p><br/><h4 id="서브타입-테이블로-변환"><a href="#서브타입-테이블로-변환" class="headerlink" title="서브타입 테이블로 변환"></a>서브타입 테이블로 변환</h4><p>이 방법은 실로 잘 쓰이지 않는다고 한다.<br>각 테이블마다 데이터가 저장되고 조인이 가능한 값이 없어서 ..<br>만약 ITEM_ID 를 조회하고 싶다면, MOVIE, BOOK, ALBUM 세개 테이블을 모두 조회해봐야 한다는 단점이 있다.<br>또한, 추후 DB 변동시에도 수정이 어렵다고 한다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Inheritance</span>(strategy = InheritanceType.TABLE_PER_CLASS)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Items</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Main은 조인전략과 같이 Movie 에 값을 넣어주도록.<br>실행하면, Moive 에만 값이 입력된다.<br>아무튼 비추라니까 .. 간단하게만 짚고 넘어가자.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;상속관계 매핑을 통해 모델링 전략을 알아봅니다.&lt;br&gt;조인전략, 단일 테이블전략, 구현 클래스마다의 서브테이블로,의 전략.&lt;/p&gt;
    
    </summary>
    
    
      <category term="JPA" scheme="http://yoursite.com/categories/JPA/"/>
    
    
      <category term="jpa" scheme="http://yoursite.com/tags/jpa/"/>
    
  </entry>
  
  <entry>
    <title>Python 인터프리터 설치, 가상환경 구성, vsCode 연동</title>
    <link href="http://yoursite.com/2020/02/29/Python-%EA%B0%80%EC%83%81%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1-py-%EC%8B%A4%ED%96%89/"/>
    <id>http://yoursite.com/2020/02/29/Python-%EA%B0%80%EC%83%81%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1-py-%EC%8B%A4%ED%96%89/</id>
    <published>2020-02-29T01:56:21.000Z</published>
    <updated>2020-03-17T02:08:40.904Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="pyenv-amp-Python"><a href="#pyenv-amp-Python" class="headerlink" title="pyenv &amp; Python"></a>pyenv &amp; Python</h3><p>Python 설치시, 인터프리터와 라이브러리도 함께 설치한다.<br>Python은 기본적으로 하나의 의존성에 대해 한 가지 버전만 설치가 가능하다.<br>Window 환경이 아니라면 인터프리터 환경을 변경해주는 version manager를 설치해줘야 한다. Node.js 의 nvm도 version manager라고 할 수 있다.<br>Python 의 version manager 는 <code>pyenv</code> 이다.</p><h4 id="Python-다운로드"><a href="#Python-다운로드" class="headerlink" title="Python 다운로드"></a>Python 다운로드</h4><p>가장먼저 Python 설치가 필요하다.<br>공식사이트에서 Window 용, v3.6.0 을 설치했다.</p><hr><h3 id="가상환경-virtualenv"><a href="#가상환경-virtualenv" class="headerlink" title="가상환경 -virtualenv"></a>가상환경 -virtualenv</h3><h4 id="virtualenv-가상환경-설치"><a href="#virtualenv-가상환경-설치" class="headerlink" title="virtualenv 가상환경 설치"></a>virtualenv 가상환경 설치</h4><p>원하는 경로에서 실행하거나 명령어 뒤에 경로를 포함하여 실행해준다.<br>필자의 경우 <code>pythonPrj</code>라는 작업 디렉토리에서 <code>test-prj</code>명으로 설치를 진행했다.</p><p><code>python -m pip install virtualenv &quot;가상환경경로&quot;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">pwd</span></span><br><span class="line">$ /c/Users/SUYEON/pythonPrj</span><br><span class="line">$ python -m pip install virtualenv</span><br></pre></td></tr></table></figure><h4 id="가상환경-생성"><a href="#가상환경-생성" class="headerlink" title="가상환경 생성"></a>가상환경 생성</h4><p>원하는 가상환경명으로 생성해준다.<br><code>virtualenv &quot;가상환경명&quot;</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ virtualenv <span class="built_in">test</span>-prj</span><br></pre></td></tr></table></figure><h4 id="가상환경-실행"><a href="#가상환경-실행" class="headerlink" title="가상환경 실행"></a>가상환경 실행</h4><p><code>source {가상환경/Scripts/activate}</code> 를 실행하면 가상환경이 구동된다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> <span class="built_in">test</span>-prj/Scripts/activate</span><br><span class="line">(<span class="built_in">test</span>-prj)</span><br></pre></td></tr></table></figure><h4 id="가상환경-종료"><a href="#가상환경-종료" class="headerlink" title="가상환경 종료"></a>가상환경 종료</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ deactivate</span><br></pre></td></tr></table></figure><h3 id="VS-와-연동"><a href="#VS-와-연동" class="headerlink" title="VS 와 연동"></a>VS 와 연동</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;em&gt;작성중&lt;/em&gt;&lt;br&gt;Python 가상환경을 virtualenv 를 사용하여 설치해봅니다.&lt;br&gt;python 을 visualcode와 연동하여 실행해봅니다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://yoursite.com/categories/Python/"/>
    
    
      <category term="python" scheme="http://yoursite.com/tags/python/"/>
    
      <category term="virtualenv" scheme="http://yoursite.com/tags/virtualenv/"/>
    
  </entry>
  
  <entry>
    <title>JPA-연관관계 매핑</title>
    <link href="http://yoursite.com/2020/02/23/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/"/>
    <id>http://yoursite.com/2020/02/23/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/</id>
    <published>2020-02-23T14:32:55.000Z</published>
    <updated>2020-03-17T02:08:40.905Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><h3 id="연관관계-매핑"><a href="#연관관계-매핑" class="headerlink" title="연관관계 매핑"></a>연관관계 매핑</h3><blockquote><p>단방향, 양방향 매핑이 있다. 항상 기본이 되는것은 단방향 매핑이고,<br>여기에 양방향으로 조회를 가능토록 해준다면 양방향.<br>여기서는 양방향에 단방향이 포함되므로 양방향을 기록하도록 하겠다.</p></blockquote><p>우선 기본 설계를 구두화하자면,<br>MEMBER, ORDERS, ORDERITEM, ITEM 테이블이 존재한다.</p><p>각 테이블의 연관관계는 아래와 같다.</p><table><thead><tr><th>TABLES</th><th>RELATION</th><th>table(FK)</th></tr></thead><tbody><tr><td>MEMBER : ORDERS</td><td>1 : N</td><td>ORDERS(MEMBER_ID)</td></tr><tr><td>ORDERS : ORDERITEM</td><td>1 : N</td><td>ORDERITEM(ORDER_ID)</td></tr><tr><td>ORDERITEM : ITEM</td><td>N : 1</td><td>ORDERITEM(ITEM_ID)</td></tr><tr><td><br/></td><td></td><td></td></tr></tbody></table><h4 id="ManyToOne"><a href="#ManyToOne" class="headerlink" title="@ManyToOne"></a>@ManyToOne</h4><blockquote><p>1:N 관계에서 N 인쪽 객체에 설정해준다.<br>아래는 <strong>Order.java</strong> 객체 일부이다.<br>위 연관관계를 기준으로 MEMBER 는 여러 ORDER 를 생성할 수 있다.</p></blockquote><p>@ManyToOne 을 MEMBER_ID 에 설정해 주었는데,<br>Order 객체가 MEMBER_ID 를 FK 로 갖는다는 의미이다.<br>그리고 member 의 타입은 MEMBER 객체를 가져와 사용한다.</p><p><strong>Order.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"ORDERS"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="meta">@JoinColumn</span>(<span class="string">"MEMBER_ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> Member member;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="OneToMany"><a href="#OneToMany" class="headerlink" title="@OneToMany"></a>@OneToMany</h4><p>위에서 @ManyToOne 을 MEMBER_ID 에 설정해 주었다면,<br>그 MEMBER_ID 가 있는 MEMBER 객체에<br>ORDER 객체로 orderList 를 생성해준다.</p><h4 id="연관관계-주인"><a href="#연관관계-주인" class="headerlink" title="연관관계 주인"></a>연관관계 주인</h4><p>여기서 연관관계 주인이 결정된다.<br><code>@OneToMany(mappedBy = &quot;&quot;)</code> mappedBy 속성에 연관관계 주인을 넣어준다.<br>여기서 연관관계 주인은 Order.java 에서 <code>@ManyToOne</code> 으로 설정해준 Member 객체의 member 변수 이다.</p><blockquote><p><strong>연관관계 주인은 FK 에 설정해준다.</strong></p></blockquote><p>아래와 같이 Member 객체 내에 <code>orderList</code> 리스트 객체가 만들어진다.</p><p><strong>Member.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"MEMBER_ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// mappedBy -&gt; Order.java 의 member 변수</span></span><br><span class="line">    <span class="meta">@OneToMany</span>(mappedBy = <span class="string">"member"</span>)</span><br><span class="line">    <span class="keyword">private</span> List&lt;Order&gt; orderList = <span class="keyword">new</span> ArrayList&lt;Order&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>OrderItem.java</strong> 도 마찬가지로 ORDER_ID 와 ITEM_ID 가 FK 이므로<br>@ManyToOne 을 설정해주고 객체타입을 각 Order, Item 객체로.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"ORDER_ITEM"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderItem</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"ORDER_ITEM_ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long orderItemId;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="meta">@JoinColumn</span>(name = <span class="string">"ORDER_ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> Order order;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="meta">@JoinColumn</span>(name = <span class="string">"ITEM_ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> Item item;</span><br></pre></td></tr></table></figure><p>Order 객체에는<br>@OneToMany 를 추가해준다.<br>Order 는 OderItem 리스트를 갖는다.</p><p><strong>Order.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name=<span class="string">"ORDERS"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Order</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="meta">@Column</span>(<span class="string">"MEMBER_ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> Member member;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@OneToMany</span>(mappedBy=<span class="string">"order"</span>)</span><br><span class="line">    List&lt;OrderItem&gt; orderItemList = <span class="keyword">new</span> ArrayList()&lt;&gt;;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Item 에서는 조회할 필요없으니 원래대로 기본키만 지정.</p><p><strong>Item.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="meta">@Column</span>(name = <span class="string">"ITEM_ID"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long itemId;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>위의 방식대로 매핑을 마치면 터미널에서 아래와 같이<br>객체를 기준으로 한 테이블이 생성되는걸 확인할 수 있다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">   create table ITEM (</span><br><span class="line">       ITEM_ID bigint not null,</span><br><span class="line">        name varchar(255),</span><br><span class="line">        price <span class="built_in">integer</span> not null,</span><br><span class="line">        stockQuantity <span class="built_in">integer</span> not null,</span><br><span class="line">        primary key (ITEM_ID)</span><br><span class="line">    )</span><br><span class="line">Hibernate: </span><br><span class="line">    </span><br><span class="line">    create table Member (</span><br><span class="line">       MEMBER_ID bigint not null,</span><br><span class="line">        city varchar(255),</span><br><span class="line">        name varchar(255),</span><br><span class="line">        street varchar(255),</span><br><span class="line">        zipcode varchar(255),</span><br><span class="line">        primary key (MEMBER_ID)</span><br><span class="line">    )</span><br><span class="line">Hibernate: </span><br><span class="line">    </span><br><span class="line">    create table ORDER_ITEM (</span><br><span class="line">       ORDER_ITEM_ID bigint not null,</span><br><span class="line">        count <span class="built_in">integer</span> not null,</span><br><span class="line">        orderPrice <span class="built_in">integer</span> not null,</span><br><span class="line">        ITEM_ID bigint,</span><br><span class="line">        ORDER_ID bigint,</span><br><span class="line">        primary key (ORDER_ITEM_ID)</span><br><span class="line">    )</span><br><span class="line">Hibernate: </span><br><span class="line">    </span><br><span class="line">    create table ORDERS (</span><br><span class="line">       id bigint not null,</span><br><span class="line">        status varchar(255),</span><br><span class="line">        MEMBER_ID bigint,</span><br><span class="line">        primary key (id)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;연관관계 매핑에서의 @ManyToOne, @OneToMany 사용법과&lt;br&gt;연관관계 주인을 지정해본다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="JPA" scheme="http://yoursite.com/categories/JPA/"/>
    
    
      <category term="JPA" scheme="http://yoursite.com/tags/JPA/"/>
    
  </entry>
  
  <entry>
    <title>JPA 기본키 매핑</title>
    <link href="http://yoursite.com/2020/02/20/%EA%B8%B0%EB%B3%B8%ED%82%A4-%EB%A7%A4%ED%95%91/"/>
    <id>http://yoursite.com/2020/02/20/%EA%B8%B0%EB%B3%B8%ED%82%A4-%EB%A7%A4%ED%95%91/</id>
    <published>2020-02-20T13:08:15.000Z</published>
    <updated>2020-03-17T02:08:40.905Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="기본키-매핑"><a href="#기본키-매핑" class="headerlink" title="기본키 매핑"></a>기본키 매핑</h3><h4 id="직접할당"><a href="#직접할당" class="headerlink" title="직접할당"></a>직접할당</h4><blockquote><p>@Id 만 사용한다.</p></blockquote><hr><h4 id="자동생성-GeneratedValue"><a href="#자동생성-GeneratedValue" class="headerlink" title="자동생성 (@GeneratedValue)"></a>자동생성 (@GeneratedValue)</h4><h5 id="IDENTITY-전략"><a href="#IDENTITY-전략" class="headerlink" title="IDENTITY 전략"></a>IDENTITY 전략</h5><blockquote><p>IDENTITY : 데이터베이스에 위임한다.</p></blockquote><p><strong>Member.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Id</span></span><br><span class="line"><span class="meta">@GeneratedValue</span>(strategy = GenerationType.AUTO)</span><br><span class="line"><span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Column</span>(name =<span class="string">"name"</span>)</span><br><span class="line"><span class="keyword">private</span> String username;</span><br></pre></td></tr></table></figure><p><strong>JpaMain.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Member member= <span class="keyword">new</span> Member();</span><br><span class="line">member.setUsername(<span class="string">"C"</span>);</span><br><span class="line"></span><br><span class="line">em.persist(member);</span><br></pre></td></tr></table></figure><p>를 두 번 실행하면 아래와 같이 순차적으로 name 에 “C” 가 입력된다.<br><img src="https://user-images.githubusercontent.com/28856435/74938723-e6c4a880-5431-11ea-9388-f1c3f39bd6b0.png" alt="image"></p><br/><h5 id="IDENTITY-전략-특징"><a href="#IDENTITY-전략-특징" class="headerlink" title="IDENTITY 전략 특징"></a>IDENTITY 전략 특징</h5><p>identity 전략은 1차 캐시에 있는 값을 모른다.<br>트랜젝션 <code>COMMIT</code> 이 아닌<br><code>em.persist</code> 호출하는 시점에 <code>INSERT</code> 쿼리가 수행된다.<br>(원래는 <code>COMMIT</code> 할 때 DB 에 수행됨.)</p><h5 id="SEQUENCE-시퀀스-전략"><a href="#SEQUENCE-시퀀스-전략" class="headerlink" title="SEQUENCE 시퀀스 전략"></a>SEQUENCE 시퀀스 전략</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@SequenceGenerator</span>(name = <span class="string">"member_seq_gen"</span>, sequenceName = <span class="string">"member_seq"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.SEQUENCE, generator = <span class="string">"member_seq_gen"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure><p>다음과 같이 테이블이 생성된다.<br><code>Hibernate: create sequence member_seq start with 1 increment by 50</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Hibernate: create sequence member_seq start with 1 increment by 50</span><br><span class="line">Hibernate: </span><br><span class="line">    </span><br><span class="line">    create table Member (</span><br><span class="line">       id bigint not null,</span><br><span class="line">        name varchar(255),</span><br><span class="line">        primary key (id)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><h5 id="SEQUENCE-전략-특징"><a href="#SEQUENCE-전략-특징" class="headerlink" title="SEQUENCE 전략 특징"></a>SEQUENCE 전략 특징</h5><blockquote><p><code>allocationSize</code> 는 시퀀스를 미리 가져와 확보해준다.<br>두번 째 INSERT 시에는 MEMBER_SEQ 테이블 조회가 아닌, MEMORY 에 있는 값을 사용하여,<br><strong>성능이 증가된다.</strong></p></blockquote><p>__Member.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@SequenceGenerator</span>(</span><br><span class="line">        name = <span class="string">"MEMBER_SEQ_GEN"</span>,</span><br><span class="line">        sequenceName = <span class="string">"MEMBER_SEQ"</span>,</span><br><span class="line">        initialValue = <span class="number">1</span>, allocationSize = <span class="number">50</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.SEQUENCE, generator = <span class="string">"MEMBER_SEQ_GEN"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure><p><strong>MEMBER_SEQ 조회</strong></p><table><thead><tr><th>실행 순서</th><th>SEQ</th></tr></thead><tbody><tr><td>1</td><td>1</td></tr><tr><td>2</td><td>51</td></tr></tbody></table><p><strong>JpaMain.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Member member1= <span class="keyword">new</span> Member();</span><br><span class="line">            member1.setUsername(<span class="string">"A"</span>);</span><br><span class="line">            Member member2= <span class="keyword">new</span> Member();</span><br><span class="line">            member2.setUsername(<span class="string">"B"</span>);</span><br><span class="line">            Member member3= <span class="keyword">new</span> Member();</span><br><span class="line">            member3.setUsername(<span class="string">"C"</span>);</span><br><span class="line">            <span class="comment">//DB SEQ = 1   |1</span></span><br><span class="line">            <span class="comment">//DB SEQ = 51  |2</span></span><br><span class="line">            em.persist(member1); <span class="comment">//1, 51 까지 확보</span></span><br><span class="line">            em.persist(member2); <span class="comment">//MEMORY</span></span><br><span class="line">            em.persist(member3); <span class="comment">// MEMORY</span></span><br></pre></td></tr></table></figure><p>실행하면, <code>MEMBER_SEQ start with 1 increment by 50</code> 구문을 확인할 수 있다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Hibernate: create sequence MEMBER_SEQ start with 1 increment by 50</span><br><span class="line">Hibernate: </span><br><span class="line">    </span><br><span class="line">    create table Member (</span><br><span class="line">       id bigint not null,</span><br><span class="line">        name varchar(255),</span><br><span class="line">        primary key (id)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p><strong>H2 DB</strong><br><img src="https://user-images.githubusercontent.com/28856435/74943988-a0267c80-5438-11ea-837d-4bb74456289b.png" alt="image"><br><br/></p><h5 id="TABLE-전략"><a href="#TABLE-전략" class="headerlink" title="TABLE 전략"></a>TABLE 전략</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@TableGenerator</span>(</span><br><span class="line">        name = <span class="string">"MEMBER_SEQ_GEN"</span>,</span><br><span class="line">        table = <span class="string">"MY_SEQ"</span>,</span><br><span class="line">        pkColumnName=<span class="string">"MEMBER_SEQ"</span>, allocationSize = <span class="number">1</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.TABLE, generator = <span class="string">"MEMBER_SEQ_GEN"</span>)</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure><p>다음과 같이 <code>MY_SEQ</code> 라는 시퀀스 테이블이 생성된다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    create table MY_SEQ (</span><br><span class="line">       MEMBER_SEQ varchar(255) not null,</span><br><span class="line">        next_val bigint,</span><br><span class="line">        primary key (MEMBER_SEQ)</span><br><span class="line">    )</span><br><span class="line">Hibernate: </span><br><span class="line">    </span><br><span class="line">    insert into MY_SEQ(MEMBER_SEQ, next_val) values (<span class="string">'Member'</span>,0)</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/28856435/74940568-fd203380-5434-11ea-8f4c-ee95ccbe2a01.png" alt="image"><br><br/></p><h3 id="기본키-제약조건"><a href="#기본키-제약조건" class="headerlink" title="기본키 제약조건"></a>기본키 제약조건</h3><blockquote><p>1) null 이 아니어야한다.<br>2) 유일해야 한다.<br>3) 변하면 안된다.</p></blockquote><p><code>Long 형 + 대체키 + 키 생성 전략 사용</code> 이 권장된다고 한다.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;기본키의 strategy;전략들의 타입들을 알아보고&lt;br&gt;타입별 데이터베이스에 수행되는 원리를 알아봅니다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="JPA" scheme="http://yoursite.com/categories/JPA/"/>
    
    
      <category term="JPA" scheme="http://yoursite.com/tags/JPA/"/>
    
      <category term="H2" scheme="http://yoursite.com/tags/H2/"/>
    
  </entry>
  
  <entry>
    <title>Node 로 서버 생성하기</title>
    <link href="http://yoursite.com/2020/02/20/Node-%EB%A1%9C-%EC%84%9C%EB%B2%84-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0/"/>
    <id>http://yoursite.com/2020/02/20/Node-%EB%A1%9C-%EC%84%9C%EB%B2%84-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0/</id>
    <published>2020-02-20T05:42:47.000Z</published>
    <updated>2020-03-17T02:08:40.903Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h4 id="Node-js-에서-ES6-모듈-사용"><a href="#Node-js-에서-ES6-모듈-사용" class="headerlink" title="Node.js 에서 ES6 모듈 사용"></a>Node.js 에서 ES6 모듈 사용</h4><p>아래 명령어로 ES6 를 사용하기 위한 설치를 진행합니다.</p><h5 id="babel-이란"><a href="#babel-이란" class="headerlink" title="babel 이란?"></a>babel 이란?</h5><blockquote><p>최신 사양의 JS 코드를 ES5 이하 코드로 변환해준다. 덕분에 구형 IE 나 구형 브라우저에서도 동작할 수 있게 해준다.</p></blockquote><h5 id="babel-cli-설치"><a href="#babel-cli-설치" class="headerlink" title="babel-cli 설치"></a>babel-cli 설치</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install @babel/cli @babel/core</span><br></pre></td></tr></table></figure><h5 id="babel-preset-env"><a href="#babel-preset-env" class="headerlink" title="@babel/preset-env"></a>@babel/preset-env</h5><blockquote><p><code>@babel/preset-env</code> 는 함께 사용해야 하는 Babel 플러그인을 모아둔 것이다.<br>필요한 플러그인들을 프로젝트 지원 환경에 맞춰 동적으로 결정해준다.</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install @babel/preset-env</span><br></pre></td></tr></table></figure><p><em>… 작성중입니다.</em></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;em&gt;작성중&lt;/em&gt;&lt;br&gt;Node.js 를 이용하여 서버를 생성해봅니다.&lt;br&gt;ES6 문법을 사용할 수 있도록 설정합니다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="Node.js" scheme="http://yoursite.com/categories/Node-js/"/>
    
    
      <category term="Node.js" scheme="http://yoursite.com/tags/Node-js/"/>
    
      <category term="server" scheme="http://yoursite.com/tags/server/"/>
    
  </entry>
  
  <entry>
    <title>Maven 501 HTTPS Required , protocol_version Error</title>
    <link href="http://yoursite.com/2020/02/18/Maven-501-HTTPS-Required-%EC%97%90%EB%9F%AC/"/>
    <id>http://yoursite.com/2020/02/18/Maven-501-HTTPS-Required-%EC%97%90%EB%9F%AC/</id>
    <published>2020-02-18T05:58:11.000Z</published>
    <updated>2020-03-17T02:08:40.903Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="Maven-Repository-정책변경"><a href="#Maven-Repository-정책변경" class="headerlink" title="Maven Repository 정책변경"></a>Maven Repository 정책변경</h3><p>2020.01.15 이후 Maven Repository 정책이 아래와 같이 변경되었다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Effective January 15, 2020, The Central Repository no longer supports insecure communication over plain HTTP and requires that all requests to the repository are encrypted over HTTPS.</span><br><span class="line">If you&#39;re receiving this error, then you need to replace all URL references to Maven Central with their canonical HTTPS counterparts.</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/28856435/74709270-1de45f80-5262-11ea-94af-7495280c30c0.png" alt="image"></p><p>Central Repository  는 일반 HTTP를 통한 통신을 지원하지 않으며 <code>HTTPS</code> 를 통해 암호화 되어야 한다는 이야기다. settings.xml 에 Maven Central 에 대한 URL 참조를 <code>HTTP -&gt; HTTPS</code> 로 바꿔주면 된다.</p><p>아래와 같이 <url> 값을 바꿔주고 <pluginRepositories> 설정을 추가해준다.</p><hr><h4 id="maven-501-해결법"><a href="#maven-501-해결법" class="headerlink" title="maven 501 해결법 ?"></a>maven 501 해결법 ?</h4><p><strong>settings.xml 에 수정</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">id</span>&gt;</span>myprofile<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">id</span>&gt;</span>central<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>Central Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.maven.apache.org/maven2<span class="tag">&lt;/<span class="name">url</span>&gt;</span>         </span><br><span class="line">    <span class="tag">&lt;<span class="name">layout</span>&gt;</span>default<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span>never<span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">id</span>&gt;</span>central<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>Central Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.maven.apache.org/maven2<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">layout</span>&gt;</span>default<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure><br/><h3 id="Received-fatal-alert-protocol-version"><a href="#Received-fatal-alert-protocol-version" class="headerlink" title="Received fatal alert: protocol_version"></a>Received fatal alert: protocol_version</h3><p>501 에러는 벗어났지만 위와 같은 설정후에도 또 다른 오류가 났다.<br>이번엔 프로토콜 오류.</p><p><code>Received fatal alert: protocol_version</code><br>아래 로그에서 이 오류를 찾을 수 있다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] The build could not <span class="built_in">read</span> 1 project -&gt; [Help 1]</span><br><span class="line">[ERROR]</span><br><span class="line">[ERROR]   The project com.olleh.gigaeyes:gigaeyes-cvsaas-ems:1.3.3 (C:\Users\ksso7\eclipse_trunk\vsaas-api-center\gigaeyes-cvsaas-ems\pom.xml) has 1 error</span><br><span class="line">[ERROR]     Non-resolvable parent POM <span class="keyword">for</span> com.olleh.gigaeyes:gigaeyes-cvsaas-ems:1.3.3: Could not transfer artifact org.springframework.boot:spring-boot-starter-parent:pom:1.5.2.RELEASE from/to central (https://repo.maven.apache.org/maven2): Transfer failed <span class="keyword">for</span> https://repo.maven.apache.org/maven2/org/springframework/boot/spring-boot-starter-parent/1.5.2.RELEASE/spring-boot-starter-parent-1.5.2.RELEASE.pom and <span class="string">'parent.relativePath'</span> points at no <span class="built_in">local</span> POM @ line 12, column 10: Received fatal alert: protocol_version -&gt; [Help 2]</span><br></pre></td></tr></table></figure><h4 id="protocol-version-해결법"><a href="#protocol-version-해결법" class="headerlink" title="protocol_version 해결법 ?"></a>protocol_version 해결법 ?</h4><p>JDK 버전에 따라 지원하는 TLS 버전이 달랐다</p><table><thead><tr><th>JDK version</th><th>지원 프로토콜 버전</th></tr></thead><tbody><tr><td>JDK 1.7</td><td>TLS v1.0~v1.1</td></tr><tr><td>JDK 1.8</td><td>TLS ~v1.2</td></tr></tbody></table><p>1) JDK 버전이 1.7 이라면 1.8 로 버전업 시켜주거나<br>2) maven build 시에 아래 옵션을 추가해준다.<br> <code>-Dhttps.protocols=TLSv1.2</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mvn install -Dhttps.protocols=TLSv1.2</span><br></pre></td></tr></table></figure><h3 id="cached-in-the-local-repository-resolution-will-not-be-reattempted"><a href="#cached-in-the-local-repository-resolution-will-not-be-reattempted" class="headerlink" title="cached in the local repository, resolution will not be reattempted"></a>cached in the local repository, resolution will not be reattempted</h3><p>그리고 또다른 오류 직면 ..</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] Failed to execute goal on project gigaeyes-cvsaas-ems: Could not resolve dependencies <span class="keyword">for</span> project com.olleh.gigaeyes:gigaeyes-cvsaas-ems:war:1.3.3: Failure to find com.olleh.gigaeyes:gigaeyes-cvsaas-lib-commons:jar:1.1.0 <span class="keyword">in</span> https://repo.maven.apache.org/maven2 was cached <span class="keyword">in</span> the <span class="built_in">local</span> repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -&gt; [Help 1]</span><br></pre></td></tr></table></figure><h4 id="메이븐-강제-업데이트하기"><a href="#메이븐-강제-업데이트하기" class="headerlink" title="메이븐 강제 업데이트하기"></a>메이븐 강제 업데이트하기</h4><p><code>-U</code> 를 추가해준다. 메이븐 강제 업데이트 옵션이다.</p><blockquote><p>-U 명령어 = Force Update of Snapshots/Releases</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mvn -Dhttps.protocols=TLSv1.2 -U install</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;+Maven 빌드 중, 501 HTTPS Required 에러&lt;br&gt;+jdk 버전에 따른 protocol_version 버전 불일치 에러&lt;br&gt;+cached in the local repository, resolution will not be reattempted&lt;/p&gt;
    
    </summary>
    
    
      <category term="Maven" scheme="http://yoursite.com/categories/Maven/"/>
    
    
      <category term="maven" scheme="http://yoursite.com/tags/maven/"/>
    
      <category term="maven-err" scheme="http://yoursite.com/tags/maven-err/"/>
    
  </entry>
  
  <entry>
    <title>구글 검색엔진 +사이트맵 생성</title>
    <link href="http://yoursite.com/2020/02/17/SearchConsole-sitemap/"/>
    <id>http://yoursite.com/2020/02/17/SearchConsole-sitemap/</id>
    <published>2020-02-17T13:54:49.000Z</published>
    <updated>2020-03-17T02:08:40.904Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="Google-search-console-등록"><a href="#Google-search-console-등록" class="headerlink" title="Google search console 등록"></a>Google search console 등록</h3><p><a href="https://search.google.com/search-console/welcome?hl=ko" target="_blank" rel="noopener">Google search console</a> 에 접속하여 일반적인 github.blog.io 를 사용하고 있다면 다음 창에 주소를 써 넣어준다.</p><p><img src="https://user-images.githubusercontent.com/28856435/74661554-863c2e00-51db-11ea-97a6-eb2365f5d594.png" alt="image"></p><p>아래과 같이 타 도메인이 아닌 깃헙 블로그는 쉽게 인증이 가능하다.</p><p><img src="https://user-images.githubusercontent.com/28856435/74668917-893e1b00-51e9-11ea-8b6a-8f83dbcb6bdb.png" alt="image"><br><br/></p><h3 id="sitemap-xml-등록하기"><a href="#sitemap-xml-등록하기" class="headerlink" title="sitemap.xml 등록하기"></a>sitemap.xml 등록하기</h3><h5 id="hexo-sitemap-플러그인-설치"><a href="#hexo-sitemap-플러그인-설치" class="headerlink" title="hexo sitemap 플러그인 설치"></a>hexo sitemap 플러그인 설치</h5><p>필자는 <code>hexo</code> 를 사용중이기에 hexo 플러그인을 사용해 sitemap 을 생성해주도록 설정했다.</p><p>아래 명령을 실행해 플러그인을 설치한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-seo-friendly-sitemap --save</span><br></pre></td></tr></table></figure><p>root 위치의 _config.yml 에 아래와 같이 sitemap 이 생성될 경로와 이름을 추가해준다.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br></pre></td></tr></table></figure><p>그리고 배포하면 이렇게 자동 생성된 파일들을 확인할 수 있다.</p><p><img src="https://user-images.githubusercontent.com/28856435/74671260-1d11e600-51ee-11ea-810c-83422a1e4544.png" alt="image"><br><br/></p><h5 id="Search-Console-에-Sitemap-등록"><a href="#Search-Console-에-Sitemap-등록" class="headerlink" title="Search Console 에 Sitemap 등록"></a>Search Console 에 Sitemap 등록</h5><p>Google Search Console 에서 sitemap 을 올린 경로로 등록해준다.</p><p>sitemap 에 성공했다 !</p><p><img src="https://user-images.githubusercontent.com/28856435/74671401-71b56100-51ee-11ea-9bdb-1ec55b30eea5.png" alt="image"></p><p><img src="https://user-images.githubusercontent.com/28856435/74671443-8abe1200-51ee-11ea-947f-f901b7b9628c.png" alt="image"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;hexo 플러그인을 이용해 Google Search Console 에 github 블로그 소유권을 인증하고 사이트맵을 등록해봅니다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="Git" scheme="http://yoursite.com/categories/Git/"/>
    
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
      <category term="google" scheme="http://yoursite.com/tags/google/"/>
    
      <category term="search-engine" scheme="http://yoursite.com/tags/search-engine/"/>
    
      <category term="sitemap" scheme="http://yoursite.com/tags/sitemap/"/>
    
  </entry>
  
  <entry>
    <title>JPA-필드와 컬럼 매핑</title>
    <link href="http://yoursite.com/2020/02/16/%ED%95%84%EB%93%9C%EC%99%80-%EC%BB%AC%EB%9F%BC-%EB%A7%A4%ED%95%91/"/>
    <id>http://yoursite.com/2020/02/16/%ED%95%84%EB%93%9C%EC%99%80-%EC%BB%AC%EB%9F%BC-%EB%A7%A4%ED%95%91/</id>
    <published>2020-02-16T09:14:24.000Z</published>
    <updated>2020-03-17T02:08:40.906Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="데이터-베이스-생성"><a href="#데이터-베이스-생성" class="headerlink" title="데이터 베이스 생성"></a>데이터 베이스 생성</h3><p>아래와 같은 Member.java 객체가 있다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name =<span class="string">"name"</span>)</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Enumerated</span>(EnumType.STRING)</span><br><span class="line">    <span class="keyword">private</span> RoleType roleType;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Temporal</span>(TemporalType.TIMESTAMP)</span><br><span class="line">    <span class="keyword">private</span> Date createDate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Temporal</span>(TemporalType.TIMESTAMP)</span><br><span class="line">    <span class="keyword">private</span> Date lastModifiedDate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Lob</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Member</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>hibernate.hbm2ddl.auto 를 create 으로 두고,<br>위 소스를 JPA 로 돌리면 아래와 같은 SQL이 실행되고 테이블이 생성된다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Hibernate: </span><br><span class="line">    </span><br><span class="line">    create table Member (</span><br><span class="line">       id bigint not null,</span><br><span class="line">        age <span class="built_in">integer</span>,</span><br><span class="line">        createDate timestamp,</span><br><span class="line">        description clob,</span><br><span class="line">        lastModifiedDate timestamp,</span><br><span class="line">        roleType varchar(255),</span><br><span class="line">        name varchar(255),</span><br><span class="line">        primary key (id)</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><br/>H2 콘솔에서도 생성된 Member 테이블이 확인된다.<p><img src="https://user-images.githubusercontent.com/28856435/74602196-92e05980-50e9-11ea-8e8f-a389f9d42cdc.png" alt="image"></p><h3 id="Colunm"><a href="#Colunm" class="headerlink" title="@Colunm"></a>@Colunm</h3><h4 id="updatable"><a href="#updatable" class="headerlink" title="updatable"></a>updatable</h4><p>등록, 변경 가능여부 (기본 true)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Column</span>(name =<span class="string">"name"</span>, updatable= <span class="keyword">false</span>)</span><br><span class="line">   <span class="keyword">private</span> String username;</span><br></pre></td></tr></table></figure><h4 id="nullable"><a href="#nullable" class="headerlink" title="nullable"></a>nullable</h4><p>null 값 허용 여부를 설정한다. (fales = not null)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Column</span>(name =<span class="string">"name"</span>, updatable= <span class="keyword">false</span>)</span><br><span class="line">   <span class="keyword">private</span> String username;</span><br></pre></td></tr></table></figure><h4 id="unique"><a href="#unique" class="headerlink" title="unique"></a>unique</h4><p>@Table 의 uniqueConstraints 와 같고 한 컬럼에 제약조건을 걸때 사용한다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(uniqueConstraints = )</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    ...&#125;</span><br></pre></td></tr></table></figure><h4 id="nullable-1"><a href="#nullable-1" class="headerlink" title="nullable"></a>nullable</h4><p>데이터베이스 컬럼 정보를 직접 지정가능하다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Column</span>(name =<span class="string">"name"</span>, columnDefinition = <span class="string">"varchar(100) defalt 'EMPTY'"</span>)</span><br><span class="line">   <span class="keyword">private</span> String username;</span><br></pre></td></tr></table></figure><h4 id="precision"><a href="#precision" class="headerlink" title="precision"></a>precision</h4><p>큰 수나 소수점을 쓸 때 사용한다.<br><br/></p><h3 id="Enumerate"><a href="#Enumerate" class="headerlink" title="@Enumerate"></a>@Enumerate</h3><blockquote><p>enum 타입을 매핑할 때 사용한다.</p></blockquote><p><strong>주의점은 ORDINAL 타입을 사용하지 않으면 된다.</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Enumerated</span>(EnumType.ORDINAL)  <span class="comment">// 사용X</span></span><br><span class="line">   <span class="keyword">private</span> RoleType roleType;</span><br></pre></td></tr></table></figure><h4 id="ORDINAL-타입을-사용한-경우"><a href="#ORDINAL-타입을-사용한-경우" class="headerlink" title="ORDINAL 타입을 사용한 경우"></a>ORDINAL 타입을 사용한 경우</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> RoleType &#123;</span><br><span class="line">    GUEST, USER, ADMIN</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ORDINAL 타입은 INTEGER 로 입력된다.</p></blockquote><p>아래와 같이 ROLETYPE 컬럼을 보면 enum Type 클래스에 맨 앞에 <code>GUEST</code> 를 추가해 주었다.<br>새로운 <code>3L</code> <code>RoleType.GUEST</code> 를 insert 결과, 다시 0번으로 중복된 값이 들어갔다.</p><p><img src="https://user-images.githubusercontent.com/28856435/74847735-f2529980-5375-11ea-91a4-be052ab75805.png" alt="image"></p><h4 id="따라서-STRING-을-사용"><a href="#따라서-STRING-을-사용" class="headerlink" title="따라서 STRING 을 사용"></a>따라서 STRING 을 사용</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Enumerated</span>(EnumType.STRING)</span><br><span class="line">  <span class="keyword">private</span> RoleType roleType;</span><br></pre></td></tr></table></figure><h3 id="Temporal"><a href="#Temporal" class="headerlink" title="@Temporal"></a>@Temporal</h3><blockquote><p>날짜 타입을 매핑할 수 있다.<br>아래처럼도 작성 가능하지만,</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Temporal</span>(TemporalType.TIMESTAMP)</span><br><span class="line">  <span class="keyword">private</span> Date createDate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Temporal</span>(TemporalType.TIMESTAMP)</span><br><span class="line">  <span class="keyword">private</span> Date lastModifiedDate;</span><br></pre></td></tr></table></figure><p>LocalDate, LocalDateTime 을 사용할 경우, 아래와 같이 생략할 수 있다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> LocalDate testLocalDate;</span><br><span class="line"><span class="keyword">private</span> LocalDateTime testLocalDateTime;</span><br></pre></td></tr></table></figure><h3 id="Lab"><a href="#Lab" class="headerlink" title="@Lab"></a>@Lab</h3><blockquote><p>필드타입이<br>문자 -&gt; clab<br>나머지는 -&gt; blab </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Lab</span></span><br><span class="line">   <span class="keyword">private</span> String description;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;필드와 컬럼 매핑.&lt;br&gt;@Column, @Enumerate, @Temporal, @Lab 등의 어노테이션에 대해 알아봅니다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="JPA" scheme="http://yoursite.com/categories/JPA/"/>
    
    
      <category term="JPA" scheme="http://yoursite.com/tags/JPA/"/>
    
      <category term="H2" scheme="http://yoursite.com/tags/H2/"/>
    
  </entry>
  
  <entry>
    <title>JPA 엔티티 매핑</title>
    <link href="http://yoursite.com/2020/02/16/JPA-%EC%97%94%ED%8B%B0%ED%8B%B0-%EB%A7%A4%ED%95%91/"/>
    <id>http://yoursite.com/2020/02/16/JPA-%EC%97%94%ED%8B%B0%ED%8B%B0-%EB%A7%A4%ED%95%91/</id>
    <published>2020-02-16T08:12:54.000Z</published>
    <updated>2020-03-17T02:08:40.902Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="객체과-테이블-매핑"><a href="#객체과-테이블-매핑" class="headerlink" title="객체과 테이블 매핑"></a>객체과 테이블 매핑</h3><h4 id="Table"><a href="#Table" class="headerlink" title="@Table"></a>@Table</h4><blockquote><p>엔티티와 매핑할 테이블 지정</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"MEM_TAB"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    ...&#125;</span><br></pre></td></tr></table></figure><p>아래와 같이 터미널에 MEM_TAB 에서 조회한것을 볼 수 있다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Hibernate: </span><br><span class="line">    select</span><br><span class="line">        member0_.id as id1_0_0_,</span><br><span class="line">        member0_.name as name2_0_0_ </span><br><span class="line">    from</span><br><span class="line">        MEM_TAB member0_ </span><br><span class="line">    <span class="built_in">where</span></span><br><span class="line">        member0_.id=?</span><br></pre></td></tr></table></figure><br/><h4 id="데이터베이스-스키마-자동-생성"><a href="#데이터베이스-스키마-자동-생성" class="headerlink" title="데이터베이스 스키마 자동 생성"></a>데이터베이스 스키마 자동 생성</h4><blockquote><p>DDL 을 애플리케이션 실행 시점에 자동생성<br>테이블 중심 -&gt; 객체 중심<br>데이터베이스 방언을 활요해서 적절한 DDL 생성<br>생성된 DDL 은 개발 장비에서만 사용.</p></blockquote><p>아래의 JPA 옵션을 적용하여 실행할 경우.</p><p><strong>옵션</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.hbm2ddl.auto"</span> <span class="attr">value</span>=<span class="string">"create"</span> /&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>옵션</th><th>기능</th></tr></thead><tbody><tr><td>create</td><td>기존 테이블에서 삭제후 생성 (CREATE+DROP)</td></tr><tr><td>create-drop</td><td>create 와 같으나 종료시점에 테이블 DROP</td></tr><tr><td>update</td><td>변경분만 반영(운영 DB에서는 사용금지)</td></tr><tr><td>validate</td><td>엔티티와 테이블이 정상 매핑되었는지 확인</td></tr><tr><td>none</td><td>사용하지 않음</td></tr></tbody></table><h6 id="create"><a href="#create" class="headerlink" title="create"></a>create</h6><p><strong>Member.java</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Column</span>(name =<span class="string">"username"</span>, length=<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Member</span><span class="params">(Long id, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Long id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>터미널</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 테이블 삭제</span></span><br><span class="line">Hibernate: </span><br><span class="line">    </span><br><span class="line">    drop table MEM_TAB <span class="keyword">if</span> exists</span><br><span class="line"></span><br><span class="line"><span class="comment"># 테이블 생성 (객체중심)</span></span><br><span class="line">Hibernate: </span><br><span class="line">    </span><br><span class="line">    create table Member (</span><br><span class="line">       id bigint not null,</span><br><span class="line">        age <span class="built_in">integer</span> not null,</span><br><span class="line">        name varchar(255),</span><br><span class="line">        primary key (id)</span><br><span class="line">    )   </span><br><span class="line"></span><br><span class="line"><span class="comment"># 테이블 조회</span></span><br><span class="line">Hibernate: </span><br><span class="line">    select</span><br><span class="line">        member0_.id as id1_0_0_,</span><br><span class="line">        member0_.age as age2_0_0_,</span><br><span class="line">        member0_.name as name3_0_0_ </span><br><span class="line">    from</span><br><span class="line">        Member member0_ </span><br><span class="line">    <span class="built_in">where</span></span><br><span class="line">        member0_.id=?</span><br></pre></td></tr></table></figure><h6 id="update"><a href="#update" class="headerlink" title="update"></a>update</h6><p><strong>터미널</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Hibernate: </span><br><span class="line">    </span><br><span class="line">    alter table Member </span><br><span class="line">       add column username varchar(10)</span><br><span class="line">Hibernate: </span><br><span class="line">    select</span><br><span class="line">        member0_.id as id1_0_0_,</span><br><span class="line">        member0_.age as age2_0_0_,</span><br><span class="line">        member0_.username as username3_0_0_ </span><br><span class="line">    from</span><br><span class="line">        Member member0_ </span><br><span class="line">    <span class="built_in">where</span></span><br><span class="line">        member0_.id=?</span><br></pre></td></tr></table></figure><h5 id="스키마-자동생성-주의점"><a href="#스키마-자동생성-주의점" class="headerlink" title="스키마 자동생성 주의점"></a>스키마 자동생성 주의점</h5><blockquote><p>운영 장비에서는 절대 사용금지<br>개발 초기단계는 create, update<br>테스트 서버는 update, validate<br>스테이징과 운영서버는 validate, none</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;객체와 테이블, 필드와 컬럼, 기본키, 연관관계 매핑에 대해 알아봅니다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="JPA" scheme="http://yoursite.com/categories/JPA/"/>
    
    
      <category term="JPA" scheme="http://yoursite.com/tags/JPA/"/>
    
      <category term="entity" scheme="http://yoursite.com/tags/entity/"/>
    
  </entry>
  
  <entry>
    <title>JPA 플러시, 준영속 상태</title>
    <link href="http://yoursite.com/2020/02/16/JPA-flush/"/>
    <id>http://yoursite.com/2020/02/16/JPA-flush/</id>
    <published>2020-02-16T07:50:54.000Z</published>
    <updated>2020-03-17T02:08:40.901Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="플러시"><a href="#플러시" class="headerlink" title="플러시?"></a>플러시?</h3><blockquote><p>영속성 컨텍스트의 변경내용을 데이터베이스에 적용.<br><br/></p></blockquote><h4 id="플러시-작용-순서"><a href="#플러시-작용-순서" class="headerlink" title="플러시 작용 순서"></a>플러시 작용 순서</h4><p>1) 변경감지<br>2) 수정된 엔티티쓰기지연 sql  저장소에 등록<br>3) flush() : 쓰기지연 sql 저장소에 있는 쿼리들이 DB에 반영이 됨.</p><h4 id="플러시는-동기화를-위한-수동호출"><a href="#플러시는-동기화를-위한-수동호출" class="headerlink" title="플러시는 동기화를 위한 수동호출"></a>플러시는 동기화를 위한 수동호출</h4><blockquote><p>트랜잭션 커밋시 자동호출됨.<br>JPQL 실행시 자동호출됨.<br>트랜잭션이라는 작업 단위가 중요하다, 커밋 직전에만 동기화하면 된다.</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Member member = <span class="keyword">new</span> Member(<span class="number">200L</span>, <span class="string">"member200"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1차 캐시에 저장됨.</span></span><br><span class="line">em.persist(member);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 쓰기지연 SQL 저장소 -&gt; DB</span></span><br><span class="line">em.flush();</span><br></pre></td></tr></table></figure><h3 id="준영속-상태"><a href="#준영속-상태" class="headerlink" title="준영속 상태"></a>준영속 상태</h3><h4 id="특정-엔티티만-준영속-상태로"><a href="#특정-엔티티만-준영속-상태로" class="headerlink" title="특정 엔티티만 준영속 상태로"></a>특정 엔티티만 준영속 상태로</h4><p>JPA 에서 조회(em.find) 했을때 1차 캐시에 없을 때 DB에서 가져와 넣음.</p><blockquote><p>em.detach()</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> Member findMember1 = em.find(Member<span class="class">.<span class="keyword">class</span>, 150<span class="title">L</span>)</span>;</span><br><span class="line">findMember1.setName(<span class="string">"AAAA"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// JPA 가 관리하지 않음. (select 문은 실행하지만 update 문은 실행하지 않음.)</span></span><br><span class="line">em.detach(findMember1);</span><br></pre></td></tr></table></figure><h4 id="영속성-컨텍스트의-모든값을-초기화"><a href="#영속성-컨텍스트의-모든값을-초기화" class="headerlink" title="영속성 컨텍스트의 모든값을 초기화"></a>영속성 컨텍스트의 모든값을 초기화</h4><blockquote><p>em.clear()</p></blockquote><h4 id="영속성-컨텍스트를-종료"><a href="#영속성-컨텍스트를-종료" class="headerlink" title="영속성 컨텍스트를 종료"></a>영속성 컨텍스트를 종료</h4><blockquote><p>em.close()</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;플러시와 준영속 상태에 대해 알아봅니다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="JPA" scheme="http://yoursite.com/categories/JPA/"/>
    
    
      <category term="JPA" scheme="http://yoursite.com/tags/JPA/"/>
    
  </entry>
  
  <entry>
    <title>JPA 영속성 컨텍스트</title>
    <link href="http://yoursite.com/2020/02/15/JPA-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8/"/>
    <id>http://yoursite.com/2020/02/15/JPA-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8/</id>
    <published>2020-02-15T03:19:04.000Z</published>
    <updated>2020-03-17T02:08:40.903Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><!-- toc --><hr><h3 id="Entity-Manager-엔티티-매니저"><a href="#Entity-Manager-엔티티-매니저" class="headerlink" title="Entity Manager (엔티티 매니저)"></a>Entity Manager (엔티티 매니저)</h3><blockquote><p>Entity Manager : Persistence Context = 1 : 1<br><br/></p></blockquote><h3 id="Persistence-Context-영속성-컨텍스트"><a href="#Persistence-Context-영속성-컨텍스트" class="headerlink" title="Persistence Context (영속성 컨텍스트)"></a>Persistence Context (영속성 컨텍스트)</h3><blockquote><p>엔티티를 영구 저장하는 환경.<br>엔티티 매니저를 통해서 영속성 컨텍스트에 접근한다. 영속성 컨텍스트는 직접적으로 눈에 보이지 않는다.<br>EntityManager.persist(entity);<br><br/></p></blockquote><h4 id="영속-비영속-준영속-삭제"><a href="#영속-비영속-준영속-삭제" class="headerlink" title="영속, 비영속, 준영속, 삭제"></a>영속, 비영속, 준영속, 삭제</h4><p><strong>비영속 상태</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 객체를 생성한 상태(비영속)</span></span><br><span class="line">Member member = <span class="keyword">new</span> Member();</span><br><span class="line">member.setId(<span class="string">"member"</span>);</span><br><span class="line">member.setUsername(<span class="string">"회원1"</span>);</span><br></pre></td></tr></table></figure><p><strong>영속 상태</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 객체를 생성한 상태(비영속)</span></span><br><span class="line">Member member = <span class="keyword">new</span> Member();</span><br><span class="line">member.setId(<span class="string">"member"</span>);</span><br><span class="line">member.setUsername(<span class="string">"회원1"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// EntityManager -&gt; Persistence Context 영속</span></span><br><span class="line">em.persist</span><br><span class="line"></span><br><span class="line"><span class="comment">// 커밋하는 순간 데이터베이스에 수행됨.</span></span><br><span class="line">tx.commit();</span><br></pre></td></tr></table></figure><p><strong>준영속, 삭제 상태</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">em.persist</span><br><span class="line"><span class="comment">// 준영속</span></span><br><span class="line">em.detach(member);</span><br><span class="line">tx.commit();</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">em.persist</span><br><span class="line"><span class="comment">// 준영속</span></span><br><span class="line">em.detach(member);</span><br><span class="line">tx.commit();</span><br></pre></td></tr></table></figure><blockquote><p><code>em.persist(member)</code> 를 넣으면 무슨일이 일어날까?<br>여기서 영속성 컨텍스트의 이점을 알 수 있다.<br><br/></p></blockquote><h4 id="영속성-컨텍스트의-이점"><a href="#영속성-컨텍스트의-이점" class="headerlink" title="영속성 컨텍스트의 이점"></a>영속성 컨텍스트의 이점</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Member member1 = <span class="keyword">new</span> Member(<span class="number">150L</span>, <span class="string">"A"</span>);</span><br><span class="line">Member member2 = <span class="keyword">new</span> Member(<span class="number">160L</span>, <span class="string">"B"</span>);</span><br><span class="line"></span><br><span class="line">em.persist(member1);</span><br><span class="line">em.persist(member2);</span><br><span class="line"></span><br><span class="line">tx.commit();</span><br></pre></td></tr></table></figure><p><code>em.persist(member)</code> -&gt; 1차 캐시에들어간다.</p><p><code>tx.commit()</code> -&gt; UPDATE 변경이 반영됨.<br><br/></p><p><strong>1차캐시 테이블</strong></p><table><thead><tr><th>@id</th><th>Entity</th></tr></thead><tbody><tr><td>“member1”</td><td>member1</td></tr><tr><td>“member2”</td><td>member2</td></tr></tbody></table><p>사실, 1차 캐시는 데이터베이스의 하나의 트랜젝션 안에서만 의미가 있다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Member findMember1 = em.find(Member<span class="class">.<span class="keyword">class</span>, 1<span class="title">L</span>)</span>;</span><br><span class="line"><span class="comment">// 1L 1차캐시에 영속성을 넣어둠.</span></span><br><span class="line">Member findMember2 = em.find(Member<span class="class">.<span class="keyword">class</span>, 1<span class="title">L</span>)</span>;</span><br></pre></td></tr></table></figure><p>아래와 같이 이미 1차 캐시에 존재하기 때문에 select 를 한번만 실행.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Hibernate: </span><br><span class="line">    select</span><br><span class="line">        member0_.id as id1_0_0_,</span><br><span class="line">        member0_.name as name2_0_0_ </span><br><span class="line">    from</span><br><span class="line">        Member member0_ </span><br><span class="line">    <span class="built_in">where</span></span><br><span class="line">        member0_.id=?</span><br></pre></td></tr></table></figure><br/><h3 id="엔티티-수정-변경감지-Dirty-Checking"><a href="#엔티티-수정-변경감지-Dirty-Checking" class="headerlink" title="엔티티 수정 -변경감지 (Dirty Checking)"></a>엔티티 수정 -변경감지 (Dirty Checking)</h3><p>아래와 같이 Member 테이블이 있다고 하자.</p><table><thead><tr><th>ID</th><th>NAME</th></tr></thead><tbody><tr><td>150</td><td>A</td></tr><tr><td>160</td><td>B</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Member findMember1 = em.find(Member<span class="class">.<span class="keyword">class</span>, 150<span class="title">L</span>)</span>;</span><br><span class="line">findMember1.setName(<span class="string">"ZZZZZ"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// em.persist() ~~?? 안해도 된다.</span></span><br><span class="line">tx.commit();</span><br></pre></td></tr></table></figure><blockquote><p>가져온 obj 에 setName 만 해주니 UPDATE 가 되었다. 어떻게 가능한걸까 ?<br>변경 transaction 이 commit 되는 시점에서 JPA 가 1차 캐시 내부의 @id, Entity, 스냅샷을 모두 비교한다.<br>Dirty Checking 의 과정은 아래와 같다.</p></blockquote><br/><h4 id="Drirty-Checking-Flow"><a href="#Drirty-Checking-Flow" class="headerlink" title="Drirty Checking Flow"></a>Drirty Checking Flow</h4><p>1) flush() -&gt; 영속성 컨텍스트(entityManager)<br>:: findMember1.setName(“ZZZZZ”);</p><p>2) 엔티티와 스냅샷 비교</p><table><thead><tr><th>@id</th><th>Entity</th><th>스냅샷</th></tr></thead><tbody><tr><td>“member1”</td><td>member1</td><td>member1스냅샷</td></tr><tr><td>“member2”</td><td>member2</td><td>member2스냅샷</td></tr></tbody></table><p>3) update SQL 생성 -&gt; <code>쓰기지연 SQL 저장소</code></p><p>4) flush -&gt; SQL update 적용</p><p>5) commit() -&gt; DB<br><br/></p><h3 id="엔티티-삭제"><a href="#엔티티-삭제" class="headerlink" title="엔티티 삭제"></a>엔티티 삭제</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Member memberA = em.find(Member.class, "memberA");</span><br><span class="line">em.remove(memberA);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;JPA 를 이해하는데 가장 중요한 용어.&lt;br&gt;엔티티 매니저와 영속성 컨텍스트를 알아봅니다.&lt;/p&gt;
    
    </summary>
    
    
      <category term="JPA" scheme="http://yoursite.com/categories/JPA/"/>
    
    
      <category term="JPA" scheme="http://yoursite.com/tags/JPA/"/>
    
  </entry>
  
  <entry>
    <title>JPA - maven 연동</title>
    <link href="http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/"/>
    <id>http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/</id>
    <published>2020-02-13T16:19:04.000Z</published>
    <updated>2020-03-17T02:08:40.901Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --></p><!-- toc --><br/><hr><h3 id="JPA-maven-연동설정"><a href="#JPA-maven-연동설정" class="headerlink" title="JPA - maven 연동설정"></a>JPA - maven 연동설정</h3><h4 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h4><p> 1) jpa 하이버네이트<br>    추후에 스프링과 연동시 다운받은 스프링 버전과 같이 선택해주는것이 좋다.<br> 2) H2 데이터베이스<br>    설치한 버전과 같은 dependency 를 넣어줘야함.<br><br/></p><h4 id="persistance-xml-rezsources-META-INF-persistance-xml"><a href="#persistance-xml-rezsources-META-INF-persistance-xml" class="headerlink" title="persistance.xml (rezsources/META-INF/persistance.xml)"></a>persistance.xml (rezsources/META-INF/persistance.xml)</h4><p><code>javax.~     속성</code>: 라이브러리를 바꿔도 사용 가능.<br><code>hibernate.~ 속성</code>: 하이버네이트 라이브러리에서만 사용 가능.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">persistence</span> <span class="attr">version</span>=<span class="string">"2.2"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/persistence"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">persistence-unit</span> <span class="attr">name</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 필수 속성 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"javax.persistence.jdbc.driver"</span> <span class="attr">value</span>=<span class="string">"org.h2.Driver"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"javax.persistence.jdbc.user"</span> <span class="attr">value</span>=<span class="string">"sa"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"javax.persistence.jdbc.password"</span> <span class="attr">value</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"javax.persistence.jdbc.url"</span> <span class="attr">value</span>=<span class="string">"jdbc:h2:tcp://localhost/~/test"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.dialect"</span> <span class="attr">value</span>=<span class="string">"org.hibernate.dialect.H2Dialect"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 옵션 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.show_sql"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.format_sql"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.use_sql_comments"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;property name="hibernate.hbm2ddl.auto" value="create" /&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">persistence-unit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">persistence</span>&gt;</span></span><br></pre></td></tr></table></figure><br/><br/><hr><h3 id="Hello-JPA-실습"><a href="#Hello-JPA-실습" class="headerlink" title="Hello JPA 실습"></a>Hello JPA 실습</h3><h4 id="Could-not-load-requested-class-org-h2-Driver"><a href="#Could-not-load-requested-class-org-h2-Driver" class="headerlink" title="Could not load requested class : org.h2.Driver"></a>Could not load requested class : org.h2.Driver</h4><p>h2 는 우선 설치해준다.<br><br/></p><img width="590" alt="h2_down" src="https://user-images.githubusercontent.com/28856435/74457147-3273d100-4ecb-11ea-88e2-2a1cf03edf69.png"><p>분명히  pom.xml 에 H2 데이터베이스를 넣고, persistence.xml 에도 Database Driver 를 설정해주었는데도<br>JpaMain 코드를 실행하여 데이터베이스 연결을 테스트 했을 때 다음과 같은 connection 오류가 발생했다.</p><p><strong><em>Could not load requested class : org.h2.Driver</em></strong><br><br/></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JpaMain</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(<span class="string">"hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>알고 보니 pom.xml 의 scope 값에</p><p><code>&lt;scope&gt;[database_name]&lt;/scope&gt;</code></p><p>이 부분의 database_name 이 잘못 들어가 있던것.</p><p>statck overflow 검색 결과..</p><p><strong><em><code>On maven docs, it says that &lt;scope&gt;test&lt;/scope&gt; dependency is not required for normal use of the application, and is only available for the test compilation and execution phases</code></em></strong></p><p>​메이븐 docs 에느 scope 종속성은 일반적인 어플리케이션에서는 사용되지 않으며,<br>test 컴파일 및 실행단계에서만  사용된다.</p><p>​<del>뭐 그렇다고 한다. 이런 기본적인 상식을 모르고 있었다니…</del> &#128580;<br>아무튼 scopse 종속성을 제거후 실행하니 연결에 성공했다.</p><img width="434" alt="h2_connected" src="https://user-images.githubusercontent.com/28856435/74457145-3273d100-4ecb-11ea-8f25-259f13c4c701.PNG"><br/><br/><br/><hr><h3 id="INCERT-SELECT-UPDATE-JPQL"><a href="#INCERT-SELECT-UPDATE-JPQL" class="headerlink" title="INCERT, SELECT, UPDATE (JPQL)"></a>INCERT, SELECT, UPDATE (JPQL)</h3><br/><h4 id="INCERT"><a href="#INCERT" class="headerlink" title="INCERT"></a>INCERT</h4><br/><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JpaMain</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 객체를 대신 저장해줌</span></span><br><span class="line">        EntityManager em = emf.createEntityManager();</span><br><span class="line">        EntityTransaction tx = em.getTransaction();</span><br><span class="line">        tx.begin();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Member member = <span class="keyword">new</span> Member();</span><br><span class="line">            member.setId(<span class="number">1L</span>);</span><br><span class="line">            member.setName(<span class="string">"HelloA"</span>);</span><br><span class="line">            em.persist(member);</span><br><span class="line">            tx.commit();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            em.close();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            emf.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>실행결과</strong></p><img width="78" alt="insert" src="https://user-images.githubusercontent.com/28856435/74457149-330c6780-4ecb-11ea-95c9-c46ef1f7dc9b.PNG"><br/><br/><img width="401" alt="memberIncert" src="https://user-images.githubusercontent.com/28856435/74457130-30117700-4ecb-11ea-8dc2-ebeff748c516.PNG"><hr><br/><h4 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JpaMain</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 객체를 대신 저장해줌</span></span><br><span class="line">        EntityManager em = emf.createEntityManager();</span><br><span class="line">        EntityTransaction tx = em.getTransaction();</span><br><span class="line">        tx.begin();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Member findMember = em.find(Member<span class="class">.<span class="keyword">class</span>, 1<span class="title">L</span>)</span>;</span><br><span class="line">            System.out.println(<span class="string">"findMember.id = "</span>+ findMember.getId());</span><br><span class="line">            System.out.println(<span class="string">"findMember.id = "</span>+ findMember.getName());</span><br><span class="line">            findMember.setName(<span class="string">"HelloJPA"</span>);</span><br><span class="line">            tx.commit();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            em.close();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            emf.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>실행결과</strong><br><img width="71" alt="update" src="https://user-images.githubusercontent.com/28856435/74457142-31db3a80-4ecb-11ea-978a-7b333507e9ac.PNG"><br><br/><br><img width="406" alt="update_console" src="https://user-images.githubusercontent.com/28856435/74457144-31db3a80-4ecb-11ea-97e0-a9a027734393.PNG"><br><br/></p><hr><h4 id="JPQL-SELECT"><a href="#JPQL-SELECT" class="headerlink" title="JPQL - SELECT"></a>JPQL - SELECT</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JpaMain</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 객체를 대신 저장해줌</span></span><br><span class="line">        EntityManager em = emf.createEntityManager();</span><br><span class="line">        EntityTransaction tx = em.getTransaction();</span><br><span class="line">        tx.begin();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//jpql 사용 - database 의 방언에 맞춰짐</span></span><br><span class="line">            List&lt;Member&gt; result = em.createQuery(<span class="string">"select m from Member as m"</span>, Member<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">                    .<span class="title">setFirstResult</span>(1)</span></span><br><span class="line"><span class="class">                    .<span class="title">setMaxResults</span>(4)</span></span><br><span class="line"><span class="class">                    .<span class="title">getResultList</span>()</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(Member member: result)&#123;</span><br><span class="line">                System.out.println(<span class="string">"member.name = "</span>+member.getName());</span><br><span class="line">            &#125;</span><br><span class="line">            tx.commit();</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            em.close();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            emf.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>실행결과</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">member.name &#x3D; HelloJPA</span><br></pre></td></tr></table></figure><br/><img width="585" alt="select,update" src="https://user-images.githubusercontent.com/28856435/74456258-e2483f00-4ec9-11ea-9497-8de599e74ad6.PNG"><br/><br/><hr><blockquote><p>EntityManagerFactory 는 하나만 생성, 애플리케이션 전체공유.<br>EntityManager  는  thread 간 공유가 안됨.<br><br/></p></blockquote><p><strong>JPQL ? 객체지향 SQL</strong></p><ul><li>단순한 조회는 EntityManager.find()</li><li>ID 가 4이상 조회하고 싶다면?​</li><li>SQL 을 추상화한 JPQL 이라는 객체지향 쿼리언어 제공.</li><li>JPQL 은 엔티티 객체를 대상으로 쿼리</li><li>SQL 은 데이터베이스 테이블을 대상으로 쿼리</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;JPA 처음 시작하기. 연동과정을 알아보고 H2 를 이용한 기본 CRUD 를 연습해봅니다.&lt;br&gt;​
    
    </summary>
    
    
      <category term="JPA" scheme="http://yoursite.com/categories/JPA/"/>
    
    
      <category term="JPA" scheme="http://yoursite.com/tags/JPA/"/>
    
      <category term="maven" scheme="http://yoursite.com/tags/maven/"/>
    
  </entry>
  
  <entry>
    <title>Git 블로그 생성 with hexo</title>
    <link href="http://yoursite.com/2020/01/18/Git-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%83%9D%EC%84%B1-with-hexo/"/>
    <id>http://yoursite.com/2020/01/18/Git-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%83%9D%EC%84%B1-with-hexo/</id>
    <published>2020-01-17T16:19:04.000Z</published>
    <updated>2020-03-17T02:08:40.901Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt --><p>작년에 <code>jekill</code> 로 git 블로그 생성을 시도하다 실패였고,<br>네이버 블로그, 티스토리로도 블로그를 시작하려 해봤지만 의지박약으로 실패 ..</p><p>내가 공부했던 로그나 일한것들을 올릴 수 있는 나만의 페이지를 갖고싶기도 하였고,<br>내 github activity 에도 실적을 남길 수 있다는 일석이조의 장점이 동기부여를 심어주지 않을까 하여<br><code>node.js</code> 가 좀 생소한 언어이지만 공부하는 김에,<br>블로그 생성과 커스텀에 대한 설명이 좀더 많은 <code>hexo</code>를 택하기로 마음 먹었습니다.</p><p>시작이 반이라 하였으니,<br>일단 hexo 로 블로그를 구축하며 겪은 과정들을 포스팅을 하기로 !</p><hr><!-- toc --><br/><br/><h3 id="Github-repository-생성부터-hexo-로컬서버로-올리기까지"><a href="#Github-repository-생성부터-hexo-로컬서버로-올리기까지" class="headerlink" title="Github repository 생성부터 hexo 로컬서버로 올리기까지."></a>Github repository 생성부터 hexo 로컬서버로 올리기까지.</h3><h4 id="ID-gibhub-io-로-repository-를-생성"><a href="#ID-gibhub-io-로-repository-를-생성" class="headerlink" title="@ID/gibhub.io 로 repository 를 생성"></a>@ID/gibhub.io 로 repository 를 생성</h4><p><img src="https://user-images.githubusercontent.com/28856435/72684483-1b3c0080-3b24-11ea-8a3e-cc52ede28df1.jpg" alt="20190120_01"><br><br/></p><h4 id="git과-node-js-설치-후-확인"><a href="#git과-node-js-설치-후-확인" class="headerlink" title="git과 node.js 설치 후 확인"></a>git과 node.js 설치 후 확인</h4><p>git 설치 <a href="https://git-scm.com/book/ko/v2/%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0-Git-%EC%84%A4%EC%B9%98" target="_blank" rel="noopener">Git</a><br>node.js 설치 <a href="https://nodejs.org/ko/download/" target="_blank" rel="noopener">Node.js</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ node -v</span><br><span class="line">$ npm -v</span><br></pre></td></tr></table></figure><h4 id="hexo-설치-후-확인"><a href="#hexo-설치-후-확인" class="headerlink" title="hexo 설치 후 확인"></a>hexo 설치 후 확인</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i hexo -cli -g</span><br><span class="line">$ hexo -v</span><br></pre></td></tr></table></figure><h4 id="hexo-새-프로젝트-만들기-시작"><a href="#hexo-새-프로젝트-만들기-시작" class="headerlink" title="hexo 새 프로젝트 만들기, 시작"></a>hexo 새 프로젝트 만들기, 시작</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Suyeon Kim&gt;node -v</span><br><span class="line">v12.14.1</span><br><span class="line">C:\Users\Suyeon Kim&gt;npm -v</span><br><span class="line">6.13.4</span><br><span class="line">C:\Users\Suyeon Kim&gt;npm i hexo-cli -g</span><br><span class="line">...</span><br><span class="line">+ hexo-cli@3.1.0</span><br><span class="line">added 82 packages from 356 contributors <span class="keyword">in</span> 7.839s</span><br><span class="line">C:\Users\Suyeon Kim&gt;hexo -v</span><br><span class="line">hexo-cli: 3.1.0</span><br><span class="line">...</span><br><span class="line">C:\Users\Suyeon Kim&gt;hexo init blog</span><br><span class="line">... </span><br><span class="line">Thank you <span class="keyword">for</span> installing EJS: built with the Jake JavaScript build tool (https://jakejs.com/)</span><br><span class="line"> found 0 vulnerabilities</span><br><span class="line">INFO  Start blogging with Hexo!</span><br></pre></td></tr></table></figure><br/><br/><h4 id="프로젝트-폴더-위치에서-hexo-서버-실행"><a href="#프로젝트-폴더-위치에서-hexo-서버-실행" class="headerlink" title="프로젝트 폴더 위치에서 hexo 서버 실행"></a>프로젝트 폴더 위치에서 hexo 서버 실행</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Suyeon Kim&gt;<span class="built_in">cd</span> blog</span><br><span class="line"> </span><br><span class="line">C:\Users\Suyeon Kim\blog&gt;hexo server</span><br><span class="line">INFO  Start processing</span><br><span class="line">INFO  Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><br/><br/><h4 id="브라우저에서-http-localhost-4000-접속하여-확인"><a href="#브라우저에서-http-localhost-4000-접속하여-확인" class="headerlink" title="브라우저에서 http://localhost:4000 접속하여 확인"></a>브라우저에서 <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> 접속하여 확인</h4><p><img src="https://user-images.githubusercontent.com/28856435/72684672-ff395e80-3b25-11ea-9d04-2a25e1759c3c.jpg" alt="20200120_03"><br><br/></p><hr><h3 id="Git-blog-에-hexo-theme-적용"><a href="#Git-blog-에-hexo-theme-적용" class="headerlink" title="Git blog 에 hexo theme 적용"></a>Git blog 에 hexo theme 적용</h3><h4 id="grunt-란"><a href="#grunt-란" class="headerlink" title="grunt 란?"></a>grunt 란?</h4><h6 id="Github-에서-말하는-Grunt"><a href="#Github-에서-말하는-Grunt" class="headerlink" title="Github 에서 말하는 Grunt"></a>Github 에서 말하는 Grunt</h6><blockquote><p><em>“Grunt is a task-based command line build tool for JavaScript projects.”</em><br>grunt 는 JavaScript Task Runner, JavaScript 자동화 툴이다.<br><br/></p></blockquote><h6 id="Grunt-사용"><a href="#Grunt-사용" class="headerlink" title="Grunt 사용"></a>Grunt 사용</h6><p>grunt 사용은 npm 을 통해 이루어진다. Node.js 가 설치되었다는 전제에 grunt를 설치한다.<br>설치는 프로젝트의 root 경로에서 진행한다.</p><p><strong>grunt-cli</strong><br>  설치 (grunt Command Line Interface)<br><strong>–save-dev</strong><br>  이 옵션은 package.json 파일과 연동시켜주며 파일 내부 “devDependencies” 항목에 설치대상을 자동으로 추가해준다. 아래 이미지를 보면 “grunt” 가 추가된것을 확인할 수 있다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g grunt-cli </span><br><span class="line">$ npm install grunt --save-dev</span><br></pre></td></tr></table></figure><img width="422" alt="grunt_in_package" src="https://user-images.githubusercontent.com/28856435/74511722-f6338580-4f49-11ea-9e82-498be49d8174.png"><br/><h4 id="hexo-배포"><a href="#hexo-배포" class="headerlink" title="hexo 배포"></a>hexo 배포</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo d // 또는 $ hexo g -d : generate 와 deploy 를 한번에 수행.</span><br></pre></td></tr></table></figure><h4 id="hexo-테마설정"><a href="#hexo-테마설정" class="headerlink" title="hexo 테마설정"></a>hexo 테마설정</h4><h6 id="theme-amp-git-repository-연동-config-yml"><a href="#theme-amp-git-repository-연동-config-yml" class="headerlink" title="theme &amp; git repository 연동 (_config.yml)"></a>theme &amp; git repository 연동 (_config.yml)</h6><p><code>myblog/_config.yml</code> 파일에 theme 항목이 있다. 적용하고자 하는 테마를 이곳에 넣어준다.</p><img width="263" alt="theme_in_config" src="https://user-images.githubusercontent.com/28856435/74512784-5d523980-4f4c-11ea-9c76-0f8204fe3be5.png"><br/><p>다시 <code>hexo s</code> 를 실행하여 localhost 에서 확인을 해보면 테마가 적용된것을 확인할 수 있다.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Hexo 를 이용해 Git Blog 를 생성합니다.&lt;br&gt;연동 전 기본 setting 부터 git repo 연동과 배포까지.&lt;/p&gt;
    
    </summary>
    
    
      <category term="Hexo" scheme="http://yoursite.com/categories/Hexo/"/>
    
      <category term="Git" scheme="http://yoursite.com/categories/Hexo/Git/"/>
    
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
      <category term="hexo" scheme="http://yoursite.com/tags/hexo/"/>
    
      <category term="blog" scheme="http://yoursite.com/tags/blog/"/>
    
  </entry>
  
</feed>
