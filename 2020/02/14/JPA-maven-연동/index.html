
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="동글씨">
    <title>JPA - maven 연동 - 동글씨</title>
    <meta name="author" content="Suyan Kim">
    
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Suyan Kim","sameAs":["https://github.com/ksso730","ksso7300@gmail.com"],"image":"https://www.gravatar.com/avatar/221eb22c21ff8475b8c63271e349b77d"},"articleBody":"\n\n\n\n\n\nJPA - maven 연동설정pom.xml 1) jpa 하이버네이트    추후에 스프링과 연동시 다운받은 스프링 버전과 같이 선택해주는것이 좋다. 2) H2 데이터베이스    설치한 버전과 같은 dependency 를 넣어줘야함.\npersistance.xml (rezsources/META-INF/persistance.xml)javax.~     속성: 라이브러리를 바꿔도 사용 가능.hibernate.~ 속성: 하이버네이트 라이브러리에서만 사용 가능.\n123456789101112131415161718192021&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;persistence version=\"2.2\"             xmlns=\"http://xmlns.jcp.org/xml/ns/persistence\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"             xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd\"&gt;    &lt;persistence-unit name=\"hello\"&gt;        &lt;properties&gt;            &lt;!-- 필수 속성 --&gt;            &lt;property name=\"javax.persistence.jdbc.driver\" value=\"org.h2.Driver\"/&gt;            &lt;property name=\"javax.persistence.jdbc.user\" value=\"sa\"/&gt;            &lt;property name=\"javax.persistence.jdbc.password\" value=\"\"/&gt;            &lt;property name=\"javax.persistence.jdbc.url\" value=\"jdbc:h2:tcp://localhost/~/test\"/&gt;            &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.H2Dialect\"/&gt;            &lt;!-- 옵션 --&gt;            &lt;property name=\"hibernate.show_sql\" value=\"true\"/&gt;            &lt;property name=\"hibernate.format_sql\" value=\"true\"/&gt;            &lt;property name=\"hibernate.use_sql_comments\" value=\"true\"/&gt;            &lt;!--&lt;property name=\"hibernate.hbm2ddl.auto\" value=\"create\" /&gt;--&gt;        &lt;/properties&gt;    &lt;/persistence-unit&gt;&lt;/persistence&gt;\n\n\n\n\n\nHello JPA 실습Could not load requested class : org.h2.Driverh2 는 우선 설치해준다.\n\n\n\n분명히  pom.xml 에 H2 데이터베이스를 넣고, persistence.xml 에도 Database Driver 를 설정해주었는데도JpaMain 코드를 실행하여 데이터베이스 연결을 테스트 했을 때 다음과 같은 connection 오류가 발생했다.\nCould not load requested class : org.h2.Driver\n12345public class JpaMain &#123;    public static void main(String[] args)&#123;        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(\"hello\");    &#125;&#125;\n알고 보니 pom.xml 의 scope 값에\n&lt;scope&gt;[database_name]&lt;/scope&gt;\n이 부분의 database_name 이 잘못 들어가 있던것.\nstatck overflow 검색 결과..\nOn maven docs, it says that &lt;scope&gt;test&lt;/scope&gt; dependency is not required for normal use of the application, and is only available for the test compilation and execution phases\n​메이븐 docs 에느 scope 종속성은 일반적인 어플리케이션에서는 사용되지 않으며,test 컴파일 및 실행단계에서만  사용된다.\n​뭐 그렇다고 한다. 이런 기본적인 상식을 모르고 있었다니… &#128580;아무튼 scopse 종속성을 제거후 실행하니 연결에 성공했다.\n\n\n\n\n\n\n\nINCERT, SELECT, UPDATE (JPQL)\n\nINCERT\n\n123456789101112131415161718192021public class JpaMain &#123;    public static void main(String[] args)&#123;        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(\"hello\");        // 객체를 대신 저장해줌        EntityManager em = emf.createEntityManager();        EntityTransaction tx = em.getTransaction();        tx.begin();        try&#123;            Member member = new Member();            member.setId(1L);            member.setName(\"HelloA\");            em.persist(member);            tx.commit();        &#125;catch (Exception e)&#123;            em.close();        &#125;finally &#123;            emf.close();        &#125;    &#125;&#125;\n\n실행결과\n\n\n\n\n\n\n\n\nUPDATE12345678910111213141516171819202122public class JpaMain &#123;    public static void main(String[] args)&#123;        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(\"hello\");        // 객체를 대신 저장해줌        EntityManager em = emf.createEntityManager();        EntityTransaction tx = em.getTransaction();        tx.begin();        try&#123;            Member findMember = em.find(Member.class, 1L);            System.out.println(\"findMember.id = \"+ findMember.getId());            System.out.println(\"findMember.id = \"+ findMember.getName());            findMember.setName(\"HelloJPA\");            tx.commit();        &#125;catch (Exception e)&#123;            em.close();        &#125;finally &#123;            emf.close();        &#125;    &#125;&#125;\n\n실행결과\n\nJPQL - SELECT12345678910111213141516171819202122232425262728public class JpaMain &#123;    public static void main(String[] args)&#123;        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(\"hello\");        // 객체를 대신 저장해줌        EntityManager em = emf.createEntityManager();        EntityTransaction tx = em.getTransaction();        tx.begin();        try&#123;            //jpql 사용 - database 의 방언에 맞춰짐            List&lt;Member&gt; result = em.createQuery(\"select m from Member as m\", Member.class)                    .setFirstResult(1)                    .setMaxResults(4)                    .getResultList();            for(Member member: result)&#123;                System.out.println(\"member.name = \"+member.getName());            &#125;            tx.commit();        &#125;catch (Exception e)&#123;            em.close();        &#125;finally &#123;            emf.close();        &#125;    &#125;&#125;\n실행결과\n1member.name &#x3D; HelloJPA\n\n\n\n\n\n\n\n\n\nEntityManagerFactory 는 하나만 생성, 애플리케이션 전체공유.EntityManager  는  thread 간 공유가 안됨.\n\nJPQL ? 객체지향 SQL\n\n단순한 조회는 EntityManager.find()\nID 가 4이상 조회하고 싶다면?​\nSQL 을 추상화한 JPQL 이라는 객체지향 쿼리언어 제공.\nJPQL 은 엔티티 객체를 대상으로 쿼리\nSQL 은 데이터베이스 테이블을 대상으로 쿼리\n","dateCreated":"2020-02-14T01:19:04+09:00","dateModified":"2020-04-28T10:36:01+09:00","datePublished":"2020-02-14T01:19:04+09:00","description":"JPA 처음 시작하기. 연동과정을 알아보고 H2 를 이용한 기본 CRUD 를 연습해봅니다.​","headline":"JPA - maven 연동","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/"},"publisher":{"@type":"Organization","name":"Suyan Kim","sameAs":["https://github.com/ksso730","ksso7300@gmail.com"],"image":"https://www.gravatar.com/avatar/221eb22c21ff8475b8c63271e349b77d","logo":{"@type":"ImageObject","url":"https://www.gravatar.com/avatar/221eb22c21ff8475b8c63271e349b77d"}},"url":"http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/","keywords":"JPA, maven"}</script>
    <meta name="description" content="JPA 처음 시작하기. 연동과정을 알아보고 H2 를 이용한 기본 CRUD 를 연습해봅니다.​">
<meta property="og:type" content="blog">
<meta property="og:title" content="JPA - maven 연동">
<meta property="og:url" content="http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/index.html">
<meta property="og:site_name" content="동글씨">
<meta property="og:description" content="JPA 처음 시작하기. 연동과정을 알아보고 H2 를 이용한 기본 CRUD 를 연습해봅니다.​">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://user-images.githubusercontent.com/28856435/74457147-3273d100-4ecb-11ea-88e2-2a1cf03edf69.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/28856435/74457145-3273d100-4ecb-11ea-8f25-259f13c4c701.PNG">
<meta property="og:image" content="https://user-images.githubusercontent.com/28856435/74457149-330c6780-4ecb-11ea-95c9-c46ef1f7dc9b.PNG">
<meta property="og:image" content="https://user-images.githubusercontent.com/28856435/74457130-30117700-4ecb-11ea-8dc2-ebeff748c516.PNG">
<meta property="og:image" content="https://user-images.githubusercontent.com/28856435/74457142-31db3a80-4ecb-11ea-978a-7b333507e9ac.PNG">
<meta property="og:image" content="https://user-images.githubusercontent.com/28856435/74457144-31db3a80-4ecb-11ea-97e0-a9a027734393.PNG">
<meta property="og:image" content="https://user-images.githubusercontent.com/28856435/74456258-e2483f00-4ec9-11ea-9497-8de599e74ad6.PNG">
<meta property="article:published_time" content="2020-02-13T16:19:04.000Z">
<meta property="article:modified_time" content="2020-04-28T01:36:01.141Z">
<meta property="article:author" content="Suyan Kim">
<meta property="article:tag" content="JPA">
<meta property="article:tag" content="maven">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/28856435/74457147-3273d100-4ecb-11ea-88e2-2a1cf03edf69.png">
    
    
        
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/221eb22c21ff8475b8c63271e349b77d?s=640"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-158530470-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-158530470-1');
    </script>


    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/index.html"
            aria-label=""
        >
            동글씨
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="https://www.gravatar.com/avatar/221eb22c21ff8475b8c63271e349b77d?s=90" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- function -->


<!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/221eb22c21ff8475b8c63271e349b77d?s=110" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">Suyan Kim</h4>
                
                    <h5 class="sidebar-profile-bio"><p>▲ Who Am I</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             
                                title="Home"href="/index.html"
                                
                                >
                    
                    <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                    <span class="sidebar-button-desc">Home</span>
                        </a>
                    <!-- add -->
                    
                </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             
                                title="Categories"href="/all-categories"
                                
                                >
                    
                    <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                    <span class="sidebar-button-desc">Categories</span>
                        </a>
                    <!-- add -->
                    
                        
                            
                                <li class="side-tag-li"><a class="side-tag" href="/categories/%E2%98%81%EF%B8%8F-Config/">☁️ Config (2)</a></li>
                            
                        
                            
                                <li class="side-tag-li"><a class="side-tag" href="/categories/%E2%98%81%EF%B8%8F-DataBase/">☁️ DataBase (1)</a></li>
                            
                        
                            
                                <li class="side-tag-li"><a class="side-tag" href="/categories/%E2%98%81%EF%B8%8F-Git/">☁️ Git (3)</a></li>
                            
                        
                            
                                <li class="side-tag-li"><a class="side-tag" href="/categories/%E2%98%81%EF%B8%8F-JPA/">☁️ JPA (10)</a></li>
                            
                        
                            
                                <li class="side-tag-li"><a class="side-tag" href="/categories/%E2%98%81%EF%B8%8F-OS/">☁️ OS (2)</a></li>
                            
                        
                            
                                <li class="side-tag-li"><a class="side-tag" href="/categories/%E2%98%81%EF%B8%8F-Python/">☁️ Python (2)</a></li>
                            
                        
                            
                                <li class="side-tag-li"><a class="side-tag" href="/categories/%E2%98%81%EF%B8%8F-React/">☁️ React (3)</a></li>
                            
                        
                            
                                <li class="side-tag-li"><a class="side-tag" href="/categories/%E2%98%81%EF%B8%8F-Spring/">☁️ Spring (1)</a></li>
                            
                        
                            
                                <li class="side-tag-li"><a class="side-tag" href="/categories/%E2%98%81%EF%B8%8F-Web/">☁️ Web (1)</a></li>
                            
                        
                            
                                <li class="side-tag-li"><a class="side-tag" href="/categories/%E2%98%81%EF%B8%8F-coding-test/">☁️ coding test (6)</a></li>
                            
                        
                    
                </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             
                                title="Tags"href="/all-tags"
                                
                                >
                    
                    <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                    <span class="sidebar-button-desc">Tags</span>
                        </a>
                    <!-- add -->
                    
                </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             
                                title="Archives"href="/all-archives"
                                
                                >
                    
                    <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                    <span class="sidebar-button-desc">Archives</span>
                        </a>
                    <!-- add -->
                    
                </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             
                                title="About"href="#about"
                                
                                >
                    
                    <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                    <span class="sidebar-button-desc">About</span>
                        </a>
                    <!-- add -->
                    
                </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/ksso730" target="_blank" rel="noopener" title="my github">
                    
                    <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                    <span class="sidebar-button-desc">my github</span>
                        </a>
                    <!-- add -->
                    
                </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ksso7300@gmail.com"
                                >
                    
                    <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                    <span class="sidebar-button-desc">contact me</span>
                        </a>
                    <!-- add -->
                    
                </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            JPA - maven 연동
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2020-02-14T01:19:04+09:00">
	
		    Feb 14, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/%E2%98%81%EF%B8%8F-JPA/">☁️ JPA</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- excerpt --></p>
<h1 id="table-of-contents">Contents</h1><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#JPA-maven-연동설정"><span class="toc-text">JPA - maven 연동설정</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pom-xml"><span class="toc-text">pom.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#persistance-xml-rezsources-META-INF-persistance-xml"><span class="toc-text">persistance.xml (rezsources&#x2F;META-INF&#x2F;persistance.xml)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hello-JPA-실습"><span class="toc-text">Hello JPA 실습</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Could-not-load-requested-class-org-h2-Driver"><span class="toc-text">Could not load requested class : org.h2.Driver</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#INCERT-SELECT-UPDATE-JPQL"><span class="toc-text">INCERT, SELECT, UPDATE (JPQL)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#INCERT"><span class="toc-text">INCERT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UPDATE"><span class="toc-text">UPDATE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JPQL-SELECT"><span class="toc-text">JPQL - SELECT</span></a></li></ol></li></ol>

<br/>

<hr>
<h3 id="JPA-maven-연동설정"><a href="#JPA-maven-연동설정" class="headerlink" title="JPA - maven 연동설정"></a>JPA - maven 연동설정</h3><h4 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h4><p> 1) jpa 하이버네이트<br>    추후에 스프링과 연동시 다운받은 스프링 버전과 같이 선택해주는것이 좋다.<br> 2) H2 데이터베이스<br>    설치한 버전과 같은 dependency 를 넣어줘야함.<br><br/></p>
<h4 id="persistance-xml-rezsources-META-INF-persistance-xml"><a href="#persistance-xml-rezsources-META-INF-persistance-xml" class="headerlink" title="persistance.xml (rezsources/META-INF/persistance.xml)"></a>persistance.xml (rezsources/META-INF/persistance.xml)</h4><p><code>javax.~     속성</code>: 라이브러리를 바꿔도 사용 가능.<br><code>hibernate.~ 속성</code>: 하이버네이트 라이브러리에서만 사용 가능.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">persistence</span> <span class="attr">version</span>=<span class="string">"2.2"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/persistence"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">             <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">persistence-unit</span> <span class="attr">name</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 필수 속성 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"javax.persistence.jdbc.driver"</span> <span class="attr">value</span>=<span class="string">"org.h2.Driver"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"javax.persistence.jdbc.user"</span> <span class="attr">value</span>=<span class="string">"sa"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"javax.persistence.jdbc.password"</span> <span class="attr">value</span>=<span class="string">""</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"javax.persistence.jdbc.url"</span> <span class="attr">value</span>=<span class="string">"jdbc:h2:tcp://localhost/~/test"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.dialect"</span> <span class="attr">value</span>=<span class="string">"org.hibernate.dialect.H2Dialect"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!-- 옵션 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.show_sql"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.format_sql"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernate.use_sql_comments"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;property name="hibernate.hbm2ddl.auto" value="create" /&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">persistence-unit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">persistence</span>&gt;</span></span><br></pre></td></tr></table></figure>

<br/>
<br/>

<hr>
<h3 id="Hello-JPA-실습"><a href="#Hello-JPA-실습" class="headerlink" title="Hello JPA 실습"></a>Hello JPA 실습</h3><h4 id="Could-not-load-requested-class-org-h2-Driver"><a href="#Could-not-load-requested-class-org-h2-Driver" class="headerlink" title="Could not load requested class : org.h2.Driver"></a>Could not load requested class : org.h2.Driver</h4><p>h2 는 우선 설치해준다.<br><br/></p>
<img width="590" alt="h2_down" src="https://user-images.githubusercontent.com/28856435/74457147-3273d100-4ecb-11ea-88e2-2a1cf03edf69.png">


<p>분명히  pom.xml 에 H2 데이터베이스를 넣고, persistence.xml 에도 Database Driver 를 설정해주었는데도<br>JpaMain 코드를 실행하여 데이터베이스 연결을 테스트 했을 때 다음과 같은 connection 오류가 발생했다.</p>
<p><strong><em>Could not load requested class : org.h2.Driver</em></strong><br><br/></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JpaMain</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(<span class="string">"hello"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>알고 보니 pom.xml 의 scope 값에</p>
<p><code>&lt;scope&gt;[database_name]&lt;/scope&gt;</code></p>
<p>이 부분의 database_name 이 잘못 들어가 있던것.</p>
<p>statck overflow 검색 결과..</p>
<p><strong><em><code>On maven docs, it says that &lt;scope&gt;test&lt;/scope&gt; dependency is not required for normal use of the application, and is only available for the test compilation and execution phases</code></em></strong></p>
<p>​메이븐 docs 에느 scope 종속성은 일반적인 어플리케이션에서는 사용되지 않으며,<br>test 컴파일 및 실행단계에서만  사용된다.</p>
<p>​<del>뭐 그렇다고 한다. 이런 기본적인 상식을 모르고 있었다니…</del> &#128580;<br>아무튼 scopse 종속성을 제거후 실행하니 연결에 성공했다.</p>
<img width="434" alt="h2_connected" src="https://user-images.githubusercontent.com/28856435/74457145-3273d100-4ecb-11ea-8f25-259f13c4c701.PNG">

<br/>
<br/>
<br/>

<hr>
<h3 id="INCERT-SELECT-UPDATE-JPQL"><a href="#INCERT-SELECT-UPDATE-JPQL" class="headerlink" title="INCERT, SELECT, UPDATE (JPQL)"></a>INCERT, SELECT, UPDATE (JPQL)</h3><br/>

<h4 id="INCERT"><a href="#INCERT" class="headerlink" title="INCERT"></a>INCERT</h4><br/>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JpaMain</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 객체를 대신 저장해줌</span></span><br><span class="line">        EntityManager em = emf.createEntityManager();</span><br><span class="line">        EntityTransaction tx = em.getTransaction();</span><br><span class="line">        tx.begin();</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Member member = <span class="keyword">new</span> Member();</span><br><span class="line">            member.setId(<span class="number">1L</span>);</span><br><span class="line">            member.setName(<span class="string">"HelloA"</span>);</span><br><span class="line">            em.persist(member);</span><br><span class="line">            tx.commit();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            em.close();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            emf.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>실행결과</strong></p>
<img width="78" alt="insert" src="https://user-images.githubusercontent.com/28856435/74457149-330c6780-4ecb-11ea-95c9-c46ef1f7dc9b.PNG">
<br/>
<br/>
<img width="401" alt="memberIncert" src="https://user-images.githubusercontent.com/28856435/74457130-30117700-4ecb-11ea-8dc2-ebeff748c516.PNG">

<hr>
<br/>

<h4 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JpaMain</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 객체를 대신 저장해줌</span></span><br><span class="line">        EntityManager em = emf.createEntityManager();</span><br><span class="line">        EntityTransaction tx = em.getTransaction();</span><br><span class="line">        tx.begin();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Member findMember = em.find(Member<span class="class">.<span class="keyword">class</span>, 1<span class="title">L</span>)</span>;</span><br><span class="line">            System.out.println(<span class="string">"findMember.id = "</span>+ findMember.getId());</span><br><span class="line">            System.out.println(<span class="string">"findMember.id = "</span>+ findMember.getName());</span><br><span class="line">            findMember.setName(<span class="string">"HelloJPA"</span>);</span><br><span class="line">            tx.commit();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            em.close();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            emf.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>실행결과</strong><br><img width="71" alt="update" src="https://user-images.githubusercontent.com/28856435/74457142-31db3a80-4ecb-11ea-978a-7b333507e9ac.PNG"><br><br/><br><img width="406" alt="update_console" src="https://user-images.githubusercontent.com/28856435/74457144-31db3a80-4ecb-11ea-97e0-a9a027734393.PNG"><br><br/></p>
<hr>
<h4 id="JPQL-SELECT"><a href="#JPQL-SELECT" class="headerlink" title="JPQL - SELECT"></a>JPQL - SELECT</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JpaMain</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        EntityManagerFactory emf  = Persistence.createEntityManagerFactory(<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 객체를 대신 저장해줌</span></span><br><span class="line">        EntityManager em = emf.createEntityManager();</span><br><span class="line">        EntityTransaction tx = em.getTransaction();</span><br><span class="line">        tx.begin();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//jpql 사용 - database 의 방언에 맞춰짐</span></span><br><span class="line">            List&lt;Member&gt; result = em.createQuery(<span class="string">"select m from Member as m"</span>, Member<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">                    .<span class="title">setFirstResult</span>(1)</span></span><br><span class="line"><span class="class">                    .<span class="title">setMaxResults</span>(4)</span></span><br><span class="line"><span class="class">                    .<span class="title">getResultList</span>()</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(Member member: result)&#123;</span><br><span class="line">                System.out.println(<span class="string">"member.name = "</span>+member.getName());</span><br><span class="line">            &#125;</span><br><span class="line">            tx.commit();</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            em.close();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            emf.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>실행결과</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">member.name &#x3D; HelloJPA</span><br></pre></td></tr></table></figure>
<br/>

<img width="585" alt="select,update" src="https://user-images.githubusercontent.com/28856435/74456258-e2483f00-4ec9-11ea-9497-8de599e74ad6.PNG">
<br/>
<br/>


<hr>
<blockquote>
<p>EntityManagerFactory 는 하나만 생성, 애플리케이션 전체공유.<br>EntityManager  는  thread 간 공유가 안됨.<br><br/></p>
</blockquote>
<p><strong>JPQL ? 객체지향 SQL</strong></p>
<ul>
<li>단순한 조회는 EntityManager.find()</li>
<li>ID 가 4이상 조회하고 싶다면?​</li>
<li>SQL 을 추상화한 JPQL 이라는 객체지향 쿼리언어 제공.</li>
<li>JPQL 은 엔티티 객체를 대상으로 쿼리</li>
<li>SQL 은 데이터베이스 테이블을 대상으로 쿼리</li>
</ul>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/JPA/" rel="tag">JPA</a> <a class="tag tag--primary tag--small t-link" href="/tags/maven/" rel="tag">maven</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/02/15/JPA-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8/"
                    data-tooltip="JPA 영속성 컨텍스트"
                    aria-label="PREVIOUS: JPA 영속성 컨텍스트"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/01/18/Git-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%83%9D%EC%84%B1-with-hexo/"
                    data-tooltip="Git 블로그 생성 with hexo"
                    aria-label="NEXT: Git 블로그 생성 with hexo"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Suyan Kim. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/02/15/JPA-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8/"
                    data-tooltip="JPA 영속성 컨텍스트"
                    aria-label="PREVIOUS: JPA 영속성 컨텍스트"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/01/18/Git-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%83%9D%EC%84%B1-with-hexo/"
                    data-tooltip="Git 블로그 생성 with hexo"
                    aria-label="NEXT: Git 블로그 생성 with hexo"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="Contents">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/221eb22c21ff8475b8c63271e349b77d?s=110" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">Suyan Kim</h4>
        <!--  -->
            <!-- <div id="about-card-bio"><p>author.bio</p>
</div> -->
            <div id="about-card-bio">안녕하세요, 서버 백엔드 개발자 동글씨입니다.</div>
        <!--  -->
        <!--  -->
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <!-- <p>Backend Developer</p>
 -->
                Backend Developer
            </div>
        <!--  -->
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Korea
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/null');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'http://yoursite.com/2020/02/14/JPA-maven-%EC%97%B0%EB%8F%99/';
              
            this.page.identifier = '2020/02/14/JPA-maven-연동/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'ksso730-github-io';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
